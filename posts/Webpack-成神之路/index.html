<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.1/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"believezjp.oriht.com","root":"/","images":"/images","scheme":"Muse","version":"8.1.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}};
  </script>
<meta name="description" content="[TOC]  慢慢来 其实比较快 学习尽量做到知其然知其所以然   视频教程来源这篇笔记是jspang教程的学习笔记  第01节：认识WebPack的作用什么是WebPack WebPack可以看做是模块打包机：它做的事情是，分析你的项目结构，找到JavaScript模块以及其它的一些浏览器不能直接运行的拓展语言（Sass，TypeScript等），并将其转换和打包为合适的格式供浏览器使用。在4.">
<meta property="og:type" content="article">
<meta property="og:title" content="Webpack 基础教程">
<meta property="og:url" content="http://believezjp.oriht.com/posts/Webpack-%E6%88%90%E7%A5%9E%E4%B9%8B%E8%B7%AF/index.html">
<meta property="og:site_name" content="believeZJP">
<meta property="og:description" content="[TOC]  慢慢来 其实比较快 学习尽量做到知其然知其所以然   视频教程来源这篇笔记是jspang教程的学习笔记  第01节：认识WebPack的作用什么是WebPack WebPack可以看做是模块打包机：它做的事情是，分析你的项目结构，找到JavaScript模块以及其它的一些浏览器不能直接运行的拓展语言（Sass，TypeScript等），并将其转换和打包为合适的格式供浏览器使用。在4.">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2018-12-05T06:47:39.000Z">
<meta property="article:modified_time" content="2018-12-05T06:47:39.000Z">
<meta property="article:author" content="believeZJP">
<meta property="article:tag" content="Webpack">
<meta property="article:tag" content="学习笔记">
<meta property="article:tag" content="webpack4">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://believezjp.oriht.com/posts/Webpack-%E6%88%90%E7%A5%9E%E4%B9%8B%E8%B7%AF/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>
<title>Webpack 基础教程 | believeZJP</title>
  



  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">believeZJP</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">记录成长路径</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <section class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC01%E8%8A%82%EF%BC%9A%E8%AE%A4%E8%AF%86WebPack%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="nav-number">1.</span> <span class="nav-text">第01节：认识WebPack的作用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFWebPack"><span class="nav-number">2.</span> <span class="nav-text">什么是WebPack</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%87%8D%E7%82%B9"><span class="nav-number">3.</span> <span class="nav-text">重点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-number">4.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E6%8F%90"><span class="nav-number">5.</span> <span class="nav-text">前提</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E5%AE%89%E8%A3%85"><span class="nav-number">5.1.</span> <span class="nav-text">全局安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%B9%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E8%BF%9B%E8%A1%8C%E5%AE%89%E8%A3%85"><span class="nav-number">5.2.</span> <span class="nav-text">对项目目录进行安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#npx"><span class="nav-number">5.3.</span> <span class="nav-text">npx</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B0%8F%E7%9F%A5%E8%AF%86"><span class="nav-number">5.3.1.</span> <span class="nav-text">小知识</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E8%8A%82-%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B%E4%B8%80%E4%B8%AADemo"><span class="nav-number">6.</span> <span class="nav-text">第二节 快速上手一个Demo</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BB%BA%E7%AB%8B%E5%9F%BA%E6%9C%AC%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="nav-number">7.</span> <span class="nav-text">建立基本项目结构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E6%AC%A1Webpack%E6%89%93%E5%8C%85"><span class="nav-number">7.1.</span> <span class="nav-text">第一次Webpack打包</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-%E7%AC%AC2%E8%8A%82"><span class="nav-number">8.</span> <span class="nav-text">总结-第2节</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E7%94%A8live-server%E8%AE%BF%E9%97%AE%E6%96%87%E4%BB%B6"><span class="nav-number">9.</span> <span class="nav-text">在浏览器中用live-server访问文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%A8%E5%91%BD%E4%BB%A4%E8%A1%8C"><span class="nav-number">9.1.</span> <span class="nav-text">用命令行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%A8webpack%E7%9A%84scripts%E5%91%BD%E4%BB%A4%E5%B0%81%E8%A3%85"><span class="nav-number">9.2.</span> <span class="nav-text">用webpack的scripts命令封装</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC03%E8%8A%82%EF%BC%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%9A%E5%85%A5%E5%8F%A3%E5%92%8C%E5%87%BA%E5%8F%A3"><span class="nav-number">10.</span> <span class="nav-text">第03节：配置文件：入口和出口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6webpack-config-js"><span class="nav-number">11.</span> <span class="nav-text">配置文件webpack.config.js</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#entry%E9%80%89%E9%A1%B9%EF%BC%88%E5%85%A5%E5%8F%A3%E9%85%8D%E7%BD%AE%EF%BC%89"><span class="nav-number">12.</span> <span class="nav-text">entry选项（入口配置）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#output-%E5%87%BA%E5%8F%A3%E9%85%8D%E7%BD%AE"><span class="nav-number">13.</span> <span class="nav-text">output(出口配置)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#webpack%E5%8D%95%E6%96%87%E4%BB%B6%E5%85%A5%E5%8F%A3%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%A0%81"><span class="nav-number">13.1.</span> <span class="nav-text">webpack单文件入口配置代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E5%85%A5%E5%8F%A3%E3%80%81%E5%A4%9A%E5%87%BA%E5%8F%A3%E9%85%8D%E7%BD%AE"><span class="nav-number">14.</span> <span class="nav-text">多入口、多出口配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-%E7%AC%AC3%E8%8A%82"><span class="nav-number">15.</span> <span class="nav-text">总结-第3节</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC4%E8%8A%82%EF%BC%9A-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%9A%E6%9C%8D%E5%8A%A1%E5%92%8C%E7%83%AD%E6%9B%B4%E6%96%B0"><span class="nav-number">16.</span> <span class="nav-text">第4节： 配置文件：服务和热更新</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AEwebpack-dev-server"><span class="nav-number">17.</span> <span class="nav-text">设置webpack-dev-server</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8%E8%BF%99%E9%87%8C%E7%9B%B4%E6%8E%A5%E8%AE%BE%E7%BD%AE-%E2%80%93open%E5%8D%B3%E5%8F%AF%E8%87%AA%E5%8A%A8%E6%89%93%E5%BC%80%E6%B5%8F%E8%A7%88%E5%99%A8"><span class="nav-number">17.1.</span> <span class="nav-text">在这里直接设置 –open即可自动打开浏览器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#historyApiFallback"><span class="nav-number">17.2.</span> <span class="nav-text">historyApiFallback</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%94%AF%E6%8C%81%E7%83%AD%E6%9B%B4%E6%96%B0"><span class="nav-number">18.</span> <span class="nav-text">支持热更新</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC5%E8%8A%82%EF%BC%9A-%E6%A8%A1%E5%9D%97%EF%BC%9ACSS%E6%96%87%E4%BB%B6%E6%89%93%E5%8C%85"><span class="nav-number">19.</span> <span class="nav-text">第5节： 模块：CSS文件打包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Loaders"><span class="nav-number">20.</span> <span class="nav-text">Loaders</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%93%E5%8C%85CSS%E6%96%87%E4%BB%B6"><span class="nav-number">21.</span> <span class="nav-text">打包CSS文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BB%BA%E7%AB%8Bindex-css%E6%96%87%E4%BB%B6"><span class="nav-number">21.1.</span> <span class="nav-text">建立index.css文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%99%E9%87%8C%E8%A1%8C%E6%9C%AB%E4%B8%80%E5%AE%9A%E8%A6%81%E5%8A%A0%E5%88%86%E5%8F%B7%EF%BC%8C%E6%B2%A1%E5%8A%A0%E5%B0%B1%E6%97%A0%E6%B3%95%E7%BC%96%E8%AF%91CSS%E6%96%87%E4%BB%B6%E6%8A%A5%E9%94%99"><span class="nav-number">21.2.</span> <span class="nav-text">这里行末一定要加分号，没加就无法编译CSS文件报错</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#style-loader-%E5%AE%98%E7%BD%91"><span class="nav-number">21.3.</span> <span class="nav-text">style-loader 官网</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#css-loader-%E5%AE%98%E7%BD%91"><span class="nav-number">21.4.</span> <span class="nav-text">css-loader 官网</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#loaders%E9%85%8D%E7%BD%AE"><span class="nav-number">21.5.</span> <span class="nav-text">loaders配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#loader%E4%B8%89%E7%A7%8D%E5%86%99%E6%B3%95"><span class="nav-number">21.6.</span> <span class="nav-text">loader三种写法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%A8%E5%93%AA%E7%A7%8D%E5%86%99%E6%B3%95%E9%83%BD%E5%8F%AF%E4%BB%A5%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%87%BAwebpack%E7%9A%84%E6%89%A9%E5%B1%95%E5%92%8C%E7%81%B5%E6%B4%BB%E6%80%A7%E9%9D%9E%E5%B8%B8%E5%BC%BA"><span class="nav-number">21.6.1.</span> <span class="nav-text">用哪种写法都可以，可以看出webpack的扩展和灵活性非常强</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-%E7%AC%AC5%E8%8A%82"><span class="nav-number">22.</span> <span class="nav-text">总结-第5节</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC6%E8%8A%82%EF%BC%9A-%E6%8F%92%E4%BB%B6%E9%85%8D%E7%BD%AE%EF%BC%9A-%E9%85%8D%E7%BD%AEJS%E5%8E%8B%E7%BC%A9"><span class="nav-number">23.</span> <span class="nav-text">第6节： 插件配置： 配置JS压缩</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8E%8B%E7%BC%A9JS%E4%BB%A3%E7%A0%81"><span class="nav-number">24.</span> <span class="nav-text">压缩JS代码</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%95%E5%85%A5"><span class="nav-number">24.1.</span> <span class="nav-text">引入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%86%E6%98%AF%E6%89%A7%E8%A1%8Cnpm-run-server%E6%97%B6%EF%BC%8C%E6%8A%A5%E9%94%99-%E5%8E%9F%E5%9B%A0%E8%BF%98%E5%BE%85%E6%9F%A5-%E5%B7%B2%E6%89%BE%E5%88%B0"><span class="nav-number">24.2.</span> <span class="nav-text">但是执行npm run server时，报错,原因还待查     已找到 ***</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC7%E8%8A%82%EF%BC%9A-%E6%8F%92%E4%BB%B6%E9%85%8D%E7%BD%AE%EF%BC%9A-HTML%E6%96%87%E4%BB%B6%E5%8F%91%E5%B8%83"><span class="nav-number">25.</span> <span class="nav-text">第7节： 插件配置： HTML文件发布</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%93%E5%8C%85HTML%E6%96%87%E4%BB%B6"><span class="nav-number">25.1.</span> <span class="nav-text">打包HTML文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#npm%E5%AE%89%E8%A3%85html-webpack-plugin-%E5%AE%98%E7%BD%91"><span class="nav-number">25.2.</span> <span class="nav-text">npm安装html-webpack-plugin 官网</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AEwebpack-config-js"><span class="nav-number">25.3.</span> <span class="nav-text">配置webpack.config.js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8plugins%E9%87%8C%E8%BF%9B%E8%A1%8C%E6%8F%92%E4%BB%B6%E7%9A%84%E9%85%8D%E7%BD%AE%EF%BC%8C%E4%BB%A3%E7%A0%81%E5%A6%82%E4%B8%8B"><span class="nav-number">25.4.</span> <span class="nav-text">在plugins里进行插件的配置，代码如下</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%93%E5%8C%85%E5%87%BA%E9%94%99"><span class="nav-number">26.</span> <span class="nav-text">打包出错</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">27.</span> <span class="nav-text">总结</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC8%E8%8A%82%EF%BC%9A-%E5%9B%BE%E7%89%87%E8%BF%88%E5%9D%91%EF%BC%9A-css%E4%B8%AD%E7%9A%84%E5%9B%BE%E7%89%87%E5%A4%84%E7%90%86"><span class="nav-number">28.</span> <span class="nav-text">第8节： 图片迈坑： css中的图片处理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3%E8%8A%82%E8%AF%BE%E5%BD%BB%E5%BA%95%E8%B5%B0%E5%87%BAwebpack%E5%9B%BE%E7%89%87%E7%9A%84%E5%9D%91"><span class="nav-number">28.1.</span> <span class="nav-text">3节课彻底走出webpack图片的坑</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#file-loader-url-loader"><span class="nav-number">29.</span> <span class="nav-text">file-loader, url-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%89%E8%A3%85"><span class="nav-number">30.</span> <span class="nav-text">1. 命令行安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#file-loader"><span class="nav-number">30.1.</span> <span class="nav-text">file-loader</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#url-loader"><span class="nav-number">30.2.</span> <span class="nav-text">url-loader</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E9%85%8D%E7%BD%AEurl-loader"><span class="nav-number">31.</span> <span class="nav-text">2. 配置url-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%8F%AA%E7%94%A8%E4%BA%86url-loader"><span class="nav-number">32.</span> <span class="nav-text">为什么配置中只用了url-loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-%E7%AC%AC8%E8%8A%82"><span class="nav-number">33.</span> <span class="nav-text">总结-第8节</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC9%E8%8A%82-%E5%9B%BE%E7%89%87%E8%BF%88%E5%9D%91%EF%BC%9A-CSS%E5%88%86%E7%A6%BB%E4%B8%8E%E5%9B%BE%E7%89%87%E8%B7%AF%E5%BE%84%E5%A4%84%E7%90%86"><span class="nav-number">34.</span> <span class="nav-text">第9节 图片迈坑： CSS分离与图片路径处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CSS%E5%88%86%E7%A6%BB%EF%BC%9A-extract-text-webpack-plugin-%E5%AE%98%E7%BD%91"><span class="nav-number">35.</span> <span class="nav-text">CSS分离： extract-text-webpack-plugin 官网</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-npm-%E5%AE%89%E8%A3%85"><span class="nav-number">35.1.</span> <span class="nav-text">1. npm 安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%BC%95%E5%85%A5"><span class="nav-number">35.2.</span> <span class="nav-text">2. 引入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E8%AE%BE%E7%BD%AEPlugins"><span class="nav-number">35.3.</span> <span class="nav-text">3. 设置Plugins</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E4%BF%AE%E6%94%B9%E5%8E%9F%E6%9D%A5%E7%9A%84stye-loader-css-loader"><span class="nav-number">35.4.</span> <span class="nav-text">4. 修改原来的stye-loader, css-loader</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%93%E5%8C%85%E7%BB%93%E6%9E%9C"><span class="nav-number">35.5.</span> <span class="nav-text">打包结果</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%BE%E7%89%87%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98"><span class="nav-number">36.</span> <span class="nav-text">图片路径问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%A4%84%E7%90%86%E5%89%8D%EF%BC%8C%E5%9C%A8webpack-config-js%E4%B8%8A%E6%96%B9%E5%A3%B0%E6%98%8E%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%8F%ABwebsite"><span class="nav-number">36.1.</span> <span class="nav-text">1. 处理前，在webpack.config.js上方声明一个对象，叫website</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%8E%E9%9D%A2%E5%8A%A0-%E4%B8%8D%E5%8A%A0-%EF%BC%8C%E6%B5%8B%E8%AF%95%E4%BA%86%E4%B8%80%E4%B8%8B%E4%B8%8D%E5%8A%A0-%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%9F%A5%E7%9C%8Bcss%E6%88%96%E5%9B%BE%E7%89%87%E8%B7%AF%E5%BE%84%EF%BC%8C%E6%98%AF%E4%B8%8D%E6%AD%A3%E7%A1%AE%E7%9A%84"><span class="nav-number">36.1.1.</span> <span class="nav-text">后面加&#x2F; 不加&#x2F;，测试了一下不加&#x2F;，可以查看css或图片路径，是不正确的</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%9C%A8output%E9%80%89%E9%A1%B9%E4%B8%AD%E5%BC%95%E7%94%A8%E8%BF%99%E4%B8%AA%E5%AF%B9%E8%B1%A1%E7%9A%84publicPath%E5%B1%9E%E6%80%A7"><span class="nav-number">36.2.</span> <span class="nav-text">2. 在output选项中引用这个对象的publicPath属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E7%94%A8webpack%E6%89%93%E5%8C%85"><span class="nav-number">36.3.</span> <span class="nav-text">3. 用webpack打包</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-%E7%AC%AC9%E8%8A%82"><span class="nav-number">37.</span> <span class="nav-text">总结-第9节</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9B%B4%E6%94%B9webpack-config-js%E6%96%87%E4%BB%B6-%E4%B8%8D%E4%BC%9A%E7%83%AD%E6%9B%B4%E6%96%B0"><span class="nav-number">37.1.</span> <span class="nav-text">更改webpack.config.js文件 不会热更新</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC10%E8%8A%82%EF%BC%9A-%E5%9B%BE%E7%89%87%E8%BF%88%E5%9D%91%EF%BC%9A-%E5%A4%84%E7%90%86HTML%E4%B8%AD%E7%9A%84%E5%9B%BE%E7%89%87"><span class="nav-number">38.</span> <span class="nav-text">第10节： 图片迈坑： 处理HTML中的图片</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%AE%89%E8%A3%85"><span class="nav-number">38.1.</span> <span class="nav-text">1.安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E9%85%8D%E7%BD%AEloader"><span class="nav-number">38.2.</span> <span class="nav-text">2. 配置loader</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%89%A7%E8%A1%8C%E6%89%93%E5%8C%85"><span class="nav-number">38.3.</span> <span class="nav-text">3. 执行打包</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-%E7%AC%AC10%E8%8A%82"><span class="nav-number">39.</span> <span class="nav-text">总结-第10节</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B0%8F%E7%9F%A5%E8%AF%86-npm-run-build"><span class="nav-number">40.</span> <span class="nav-text">小知识 npm run build</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B2%A1%E6%9C%89%E6%89%93%E5%8C%85npm-run-build%EF%BC%8C%E7%9B%B4%E6%8E%A5npm-run-server-%E6%97%A0%E6%B3%95%E7%9C%8B%E5%88%B0%E6%9C%80%E6%96%B0%E7%BB%93%E6%9E%9C"><span class="nav-number">40.1.</span> <span class="nav-text">没有打包npm run build，直接npm run server,无法看到最新结果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%AA%E6%9C%89%E9%A1%B9%E7%9B%AE%E5%AE%89%E8%A3%85%E4%BA%86webpack%EF%BC%8C%E5%A6%82%E4%BD%95%E6%89%93%E5%8C%85"><span class="nav-number">40.2.</span> <span class="nav-text">只有项目安装了webpack，如何打包</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="nav-number">40.2.1.</span> <span class="nav-text">解决办法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E6%8A%8A%E5%9B%BE%E7%89%87%E6%94%BE%E5%88%B0%E6%8C%87%E5%AE%9A%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B"><span class="nav-number">40.3.</span> <span class="nav-text">如何把图片放到指定的文件夹下</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC11%E8%8A%82%EF%BC%9A-CSS-%E8%BF%9B%E9%98%B6%EF%BC%9A-Less-%E6%96%87%E4%BB%B6%E7%9A%84%E6%89%93%E5%8C%85%E5%92%8C%E5%88%86%E7%A6%BB"><span class="nav-number">41.</span> <span class="nav-text">第11节： CSS 进阶： Less 文件的打包和分离</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%93%E5%8C%85Less%E6%96%87%E4%BB%B6"><span class="nav-number">42.</span> <span class="nav-text">打包Less文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%AE%89%E8%A3%85-%E5%AE%98%E7%BD%91"><span class="nav-number">42.1.</span> <span class="nav-text">1. 安装 官网</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-loader%E9%85%8D%E7%BD%AE"><span class="nav-number">42.2.</span> <span class="nav-text">2. loader配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AAless%E6%96%87%E4%BB%B6"><span class="nav-number">42.3.</span> <span class="nav-text">3. 编写一个less文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E5%BC%95%E5%85%A5%E5%88%B0entry-js"><span class="nav-number">42.4.</span> <span class="nav-text">4. 引入到entry.js</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8A%8ALess%E6%96%87%E4%BB%B6%E5%88%86%E7%A6%BB"><span class="nav-number">43.</span> <span class="nav-text">把Less文件分离</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AEless%E7%9A%84loader"><span class="nav-number">43.1.</span> <span class="nav-text">配置less的loader</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%93%E5%8C%85"><span class="nav-number">43.2.</span> <span class="nav-text">打包</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-%E7%AC%AC11%E8%8A%82"><span class="nav-number">44.</span> <span class="nav-text">总结-第11节</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC12%E8%8A%82%EF%BC%9A-CSS%E8%BF%9B%E9%98%B6%EF%BC%9A-SASS%E6%96%87%E4%BB%B6%E7%9A%84%E6%89%93%E5%8C%85%E5%92%8C%E5%88%86%E7%A6%BB-%E5%AE%98%E7%BD%91"><span class="nav-number">45.</span> <span class="nav-text">第12节： CSS进阶： SASS文件的打包和分离  官网</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%AE%89%E8%A3%85%E4%B8%A4%E4%B8%AA%E5%8C%85node-sass%EF%BC%8Csass-loader"><span class="nav-number">45.1.</span> <span class="nav-text">1. 安装两个包node-sass，sass-loader</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E7%BC%96%E5%86%99loader%E9%85%8D%E7%BD%AE"><span class="nav-number">45.2.</span> <span class="nav-text">2. 编写loader配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-SASS-%E6%96%87%E4%BB%B6%E7%9A%84%E7%BC%96%E5%86%99"><span class="nav-number">45.3.</span> <span class="nav-text">3.SASS 文件的编写</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E6%8A%8ASASS%E6%96%87%E4%BB%B6%E5%88%86%E7%A6%BB"><span class="nav-number">45.4.</span> <span class="nav-text">4. 把SASS文件分离</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B0%8F%E7%9F%A5%E8%AF%86-D"><span class="nav-number">46.</span> <span class="nav-text">小知识-D</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC13%E8%8A%82%EF%BC%9ACSS%E8%BF%9B%E9%98%B6%EF%BC%9A-%E8%87%AA%E5%8A%A8%E5%A4%84%E7%90%86CSS3%E5%B1%9E%E6%80%A7%E5%89%8D%E7%BC%80"><span class="nav-number">47.</span> <span class="nav-text">第13节：CSS进阶： 自动处理CSS3属性前缀</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%B1%9E%E6%80%A7%E5%89%8D%E7%BC%80"><span class="nav-number">48.</span> <span class="nav-text">什么是属性前缀</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#PostCSS"><span class="nav-number">48.1.</span> <span class="nav-text">PostCSS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%AE%89%E8%A3%85-1"><span class="nav-number">48.2.</span> <span class="nav-text">1. 安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-postcss-config-js"><span class="nav-number">48.3.</span> <span class="nav-text">2. postcss.config.js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E7%BC%96%E5%86%99loader"><span class="nav-number">48.4.</span> <span class="nav-text">3. 编写loader</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%99%E9%87%8C%E6%98%AF%E6%8F%90%E5%8F%96css%E7%9A%84loader%E9%85%8D%E7%BD%AE"><span class="nav-number">48.4.1.</span> <span class="nav-text">这里是提取css的loader配置</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E5%9C%A8index-css%E4%B8%AD%E6%B7%BB%E5%8A%A0css%E6%A0%B7%E5%BC%8F"><span class="nav-number">48.5.</span> <span class="nav-text">5. 在index.css中添加css样式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC14%E8%8A%82%EF%BC%9A-CSS%E8%BF%9B%E9%98%B6%EF%BC%9A-%E6%B6%88%E9%99%A4%E6%9C%AA%E4%BD%BF%E7%94%A8%E7%9A%84CSS"><span class="nav-number">49.</span> <span class="nav-text">第14节： CSS进阶： 消除未使用的CSS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PurifyCSS"><span class="nav-number">50.</span> <span class="nav-text">PurifyCSS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%AE%89%E8%A3%85PurifyCSS-webpack-%E5%AE%98%E7%BD%91"><span class="nav-number">50.1.</span> <span class="nav-text">1. 安装PurifyCSS-webpack 官网</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%BC%95%E5%85%A5glob"><span class="nav-number">50.2.</span> <span class="nav-text">2. 引入glob</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E9%85%8D%E7%BD%AEplugins"><span class="nav-number">50.3.</span> <span class="nav-text">3.配置plugins</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E5%9C%A8index-css%E4%B8%AD%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%BA%9B%E6%B2%A1%E7%94%A8%E7%9A%84css"><span class="nav-number">50.4.</span> <span class="nav-text">4.在index.css中添加一些没用的css</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#css%E6%96%87%E4%BB%B6%E4%BB%A3%E7%A0%81%E5%88%86%E5%89%B2"><span class="nav-number">50.5.</span> <span class="nav-text">css文件代码分割</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-%E7%AC%AC14%E8%8A%82"><span class="nav-number">51.</span> <span class="nav-text">总结-第14节</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC15%E8%8A%82%EF%BC%9A-%E7%BB%99webpack%E5%A2%9E%E5%8A%A0babel%E9%85%8D%E7%BD%AE"><span class="nav-number">52.</span> <span class="nav-text">第15节： 给webpack增加babel配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#babel%E6%98%AF%E4%BB%80%E4%B9%88-%E5%AE%98%E7%BD%91"><span class="nav-number">53.</span> <span class="nav-text">babel是什么 官网</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Babel%E5%AE%89%E8%A3%85"><span class="nav-number">53.1.</span> <span class="nav-text">1. Babel安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%9C%A8webpack%E4%B8%AD%E9%85%8D%E7%BD%AEBabel"><span class="nav-number">53.2.</span> <span class="nav-text">2.在webpack中配置Babel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%9C%A8entry-js%E4%B8%AD%E4%BF%AE%E6%94%B9%E4%BB%A3%E7%A0%81"><span class="nav-number">53.3.</span> <span class="nav-text">3.在entry.js中修改代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#babelrc%E9%85%8D%E7%BD%AE"><span class="nav-number">53.4.</span> <span class="nav-text">.babelrc配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ENV-%E5%AE%98%E7%BD%91"><span class="nav-number">54.</span> <span class="nav-text">ENV 官网</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85babel"><span class="nav-number">54.1.</span> <span class="nav-text">安装babel</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-%E7%AC%AC15%E8%8A%82"><span class="nav-number">55.</span> <span class="nav-text">总结-第15节</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC16%E8%8A%82%EF%BC%9A-%E6%89%93%E5%8C%85%E5%90%8E%E5%A6%82%E4%BD%95%E8%B0%83%E8%AF%95"><span class="nav-number">56.</span> <span class="nav-text">第16节： 打包后如何调试</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#webpack%E6%94%AF%E6%8C%81%E7%94%9F%E6%88%90sourceMap%E6%9D%A5%E6%96%B9%E4%BE%BF%E8%B0%83%E8%AF%95"><span class="nav-number">56.1.</span> <span class="nav-text">webpack支持生成sourceMap来方便调试</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E7%A7%8D%E9%80%89%E9%A1%B9"><span class="nav-number">57.</span> <span class="nav-text">四种选项</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#source-map"><span class="nav-number">57.1.</span> <span class="nav-text">source-map</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cheap-module-source-map"><span class="nav-number">57.2.</span> <span class="nav-text">cheap-module-source-map</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#eval-source-map"><span class="nav-number">57.3.</span> <span class="nav-text">eval-source-map</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cheap-module-eval-source-map"><span class="nav-number">57.4.</span> <span class="nav-text">cheap-module-eval-source-map</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9B%9B%E7%A7%8D%E6%89%93%E5%8C%85%E6%A8%A1%E5%BC%8F%EF%BC%8C%E7%94%B1%E4%B8%8A%E5%88%B0%E4%B8%8B%E8%B6%8A%E6%9D%A5%E8%B6%8A%E5%BF%AB%E3%80%82%E5%BF%AB%E7%9A%84%E5%90%8C%E6%97%B6%EF%BC%8C%E4%B9%9F%E6%84%8F%E5%91%B3%E7%9D%80%E5%AF%B9%E4%BB%A3%E7%A0%81%E8%B0%83%E8%AF%95%E7%9A%84%E5%9B%B0%E9%9A%BE%E8%B6%8A%E5%A4%A7"><span class="nav-number">57.4.1.</span> <span class="nav-text">四种打包模式，由上到下越来越快。快的同时，也意味着对代码调试的困难越大</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A8%E8%8D%90%E7%BA%BF%E4%B8%8A%E7%94%A8%E7%9A%84cheap-module-source-map-%E6%96%B9%E4%BE%BF%E7%BA%BF%E4%B8%8A%E5%87%BA%E9%97%AE%E9%A2%98%E6%89%BE%E5%8E%9F%E5%9B%A0"><span class="nav-number">57.5.</span> <span class="nav-text">推荐线上用的cheap-module-source-map, 方便线上出问题找原因</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AEwebpack-config-js%E7%9A%84devtool"><span class="nav-number">58.</span> <span class="nav-text">配置webpack.config.js的devtool</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-%E7%AC%AC16%E8%8A%82"><span class="nav-number">59.</span> <span class="nav-text">总结-第16节</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC17%E8%8A%82%EF%BC%9A-%E5%AE%9E%E6%88%98%E6%8A%80%E5%B7%A7%EF%BC%9A-%E5%BC%80%E5%8F%91%E5%92%8C%E7%94%9F%E4%BA%A7%E5%B9%B6%E8%A1%8C%E9%85%8D%E7%BD%AE"><span class="nav-number">60.</span> <span class="nav-text">第17节： 实战技巧： 开发和生产并行配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BE%9D%E8%B5%96%E4%B8%8D%E5%90%8C"><span class="nav-number">61.</span> <span class="nav-text">依赖不同</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#npm%E5%AE%89%E8%A3%85"><span class="nav-number">62.</span> <span class="nav-text">npm安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1"><span class="nav-number">62.1.</span> <span class="nav-text">1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2"><span class="nav-number">62.2.</span> <span class="nav-text">2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3"><span class="nav-number">62.3.</span> <span class="nav-text">3</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E5%85%A8%E9%83%A8%E4%BE%9D%E8%B5%96%E5%8C%85"><span class="nav-number">62.4.</span> <span class="nav-text">安装全部依赖包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E4%BE%9D%E8%B5%96%E5%8C%85"><span class="nav-number">62.5.</span> <span class="nav-text">安装生产环境依赖包</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E7%94%9F%E4%BA%A7%E5%92%8C%E5%BC%80%E5%8F%91%E5%B9%B6%E8%A1%8C"><span class="nav-number">63.</span> <span class="nav-text">配置生产和开发并行</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9package-json%E5%91%BD%E4%BB%A4"><span class="nav-number">63.1.</span> <span class="nav-text">修改package.json命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9webpack-config-js%E6%96%87%E4%BB%B6"><span class="nav-number">63.2.</span> <span class="nav-text">修改webpack.config.js文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-%E7%AC%AC17%E8%8A%82"><span class="nav-number">64.</span> <span class="nav-text">总结-第17节</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC18%E8%8A%82%EF%BC%9A-%E5%AE%9E%E6%88%98%E6%8A%80%E5%B7%A7%EF%BC%9A-webpack%E6%A8%A1%E5%9D%97%E5%8C%96%E9%85%8D%E7%BD%AE"><span class="nav-number">65.</span> <span class="nav-text">第18节： 实战技巧： webpack模块化配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#js%E7%9A%84%E6%A8%A1%E5%9D%97%E5%8C%96%E5%AE%9E%E7%8E%B0"><span class="nav-number">66.</span> <span class="nav-text">js的模块化实现</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#webpack%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="nav-number">67.</span> <span class="nav-text">webpack模块化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%9C%A8%E6%A0%B9%E7%9B%AE%E5%BD%95%E5%BB%BA%E4%B8%80%E4%B8%AAwebpackConfig%E6%96%87%E4%BB%B6%E5%A4%B9%EF%BC%8C%E6%96%B0%E5%BB%BAentry-webpack-js%EF%BC%8C%E5%A6%82%E4%B8%8B"><span class="nav-number">67.1.</span> <span class="nav-text">1. 在根目录建一个webpackConfig文件夹，新建entry_webpack.js，如下</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%9C%A8webpack-config-js%E4%B8%AD%E5%BC%95%E5%85%A5%EF%BC%8C%E8%BF%99%E9%87%8C%E5%8F%AA%E8%83%BD%E7%94%A8require%E5%BC%95%E5%85%A5"><span class="nav-number">67.2.</span> <span class="nav-text">2. 在webpack.config.js中引入，这里只能用require引入</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-%E7%AC%AC18%E8%8A%82"><span class="nav-number">68.</span> <span class="nav-text">总结-第18节</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC19%E8%8A%82%EF%BC%9A-%E5%AE%9E%E6%88%98%E6%8A%80%E5%B7%A7%EF%BC%9A-%E4%BC%98%E9%9B%85%E6%89%93%E5%8C%85%E7%AC%AC%E4%B8%89%E6%96%B9%E7%B1%BB%E5%BA%93-shimming"><span class="nav-number">69.</span> <span class="nav-text">第19节： 实战技巧： 优雅打包第三方类库-shimming</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%95%E5%85%A5jQuery"><span class="nav-number">70.</span> <span class="nav-text">引入jQuery</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E7%A7%8D"><span class="nav-number">70.1.</span> <span class="nav-text">第一种</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85jquery"><span class="nav-number">70.2.</span> <span class="nav-text">安装jquery</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9entry-js%E6%96%87%E4%BB%B6"><span class="nav-number">70.3.</span> <span class="nav-text">修改entry.js文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E7%A7%8D"><span class="nav-number">70.4.</span> <span class="nav-text">第二种</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%A8plugin%E5%BC%95%E5%85%A5"><span class="nav-number">70.5.</span> <span class="nav-text">用plugin引入</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-%E7%AC%AC19%E8%8A%82"><span class="nav-number">71.</span> <span class="nav-text">总结-第19节</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC20%E8%8A%82%EF%BC%9A-%E5%AE%9E%E6%88%98%E6%8A%80%E5%B7%A7%EF%BC%9A-watch%E7%9A%84%E6%AD%A3%E7%A1%AE%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="nav-number">72.</span> <span class="nav-text">第20节： 实战技巧： watch的正确使用方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#watch%E8%AE%BE%E7%BD%AE"><span class="nav-number">73.</span> <span class="nav-text">watch设置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#BannerPlugin%E6%8F%92%E4%BB%B6"><span class="nav-number">74.</span> <span class="nav-text">BannerPlugin插件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC21%E8%8A%82%EF%BC%9A-%E5%AE%9E%E6%88%98%E6%8A%80%E5%B7%A7%EF%BC%9A-webpack%E4%BC%98%E5%8C%96%E9%BB%91%E6%8A%80%E8%83%BD"><span class="nav-number">75.</span> <span class="nav-text">第21节： 实战技巧： webpack优化黑技能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ProvidePlugin%E5%92%8Cimport"><span class="nav-number">76.</span> <span class="nav-text">ProvidePlugin和import</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8A%BD%E7%A6%BBjQuery"><span class="nav-number">77.</span> <span class="nav-text">抽离jQuery</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A-%E4%BF%AE%E6%94%B9%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6"><span class="nav-number">77.1.</span> <span class="nav-text">第一步： 修改入口文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E5%BC%95%E5%85%A5%E6%8F%92%E4%BB%B6"><span class="nav-number">77.2.</span> <span class="nav-text">第二步：引入插件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E4%B8%AA%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E6%8A%BD%E7%A6%BB"><span class="nav-number">78.</span> <span class="nav-text">多个第三方库抽离</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A-%E5%85%88%E7%94%A8npm%E8%BF%9B%E8%A1%8C%E5%AE%89%E8%A3%85"><span class="nav-number">78.1.</span> <span class="nav-text">第一步： 先用npm进行安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A-%E5%9C%A8%E5%85%A5%E5%8F%A3%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BC%95%E5%85%A5Vue%E5%92%8Cjquery"><span class="nav-number">78.2.</span> <span class="nav-text">第二步： 在入口配置中引入Vue和jquery</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E4%BF%AE%E6%94%B9CommonsChunkPlugin%E9%85%8D%E7%BD%AE"><span class="nav-number">78.3.</span> <span class="nav-text">第三步：修改CommonsChunkPlugin配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-%E7%AC%AC21%E8%8A%82"><span class="nav-number">79.</span> <span class="nav-text">总结-第21节</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC22%E8%8A%82%EF%BC%9A-%E5%AE%9E%E6%88%98%E6%8A%80%E5%B7%A7%EF%BC%9A-%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E9%9B%86%E4%B8%AD%E8%BE%93%E5%87%BA"><span class="nav-number">80.</span> <span class="nav-text">第22节： 实战技巧： 静态资源集中输出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8copy-webpack-plugin"><span class="nav-number">81.</span> <span class="nav-text">使用copy-webpack-plugin</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85"><span class="nav-number">81.1.</span> <span class="nav-text">插件安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%95%E5%85%A5%E6%8F%92%E4%BB%B6"><span class="nav-number">81.2.</span> <span class="nav-text">引入插件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%8F%92%E4%BB%B6"><span class="nav-number">81.3.</span> <span class="nav-text">配置插件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-%E7%AC%AC22%E8%8A%82"><span class="nav-number">82.</span> <span class="nav-text">总结-第22节</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC23%E8%8A%82%EF%BC%9A-%E5%AE%9E%E6%88%98%E6%8A%80%E5%B7%A7%EF%BC%9A-JSON%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">83.</span> <span class="nav-text">第23节： 实战技巧： JSON配置文件的使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%BB%E5%8F%96JSON%E5%86%85%E5%AE%B9"><span class="nav-number">84.</span> <span class="nav-text">读取JSON内容</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%B4%E8%AF%B4%E7%83%AD%E6%9B%B4%E6%96%B0"><span class="nav-number">85.</span> <span class="nav-text">说说热更新</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%99%E9%87%8C%E7%9A%84%E7%83%AD%E6%9B%B4%E6%96%B0%E5%92%8C%E5%B9%B3%E6%97%B6%E5%86%99%E7%A8%8B%E5%BA%8F%E7%9A%84%E7%83%AD%E5%8A%A0%E8%BD%BD%E4%B8%8D%E6%98%AF%E4%B8%80%E5%9B%9E%E4%BA%8B%EF%BC%8C%E6%AF%94%E5%A6%82%E8%AF%B4%E6%88%91%E4%BB%ACVue%E5%92%8CReact%E4%B8%AD%E7%9A%84%E7%83%AD%E6%9B%B4%E6%96%B0%EF%BC%8C%E5%B9%B6%E4%B8%8D%E6%98%AF%E5%88%B7%E6%96%B0%E6%95%B4%E4%B8%AA%E9%A1%B5%E9%9D%A2%EF%BC%8C%E8%80%8C%E6%98%AF%E4%B8%80%E4%B8%AA%E5%B1%80%E9%83%A8%E7%9A%84%E6%9B%B4%E6%96%B0%EF%BC%8C%E8%80%8C%E8%BF%99%E9%87%8C%E7%9A%84%E6%9B%B4%E6%96%B0%E6%98%AF%E5%88%B7%E6%96%B0%E4%BA%86%E6%95%B4%E4%B8%AA%E9%A1%B5%E9%9D%A2"><span class="nav-number">85.1.</span> <span class="nav-text">这里的热更新和平时写程序的热加载不是一回事，比如说我们Vue和React中的热更新，并不是刷新整个页面，而是一个局部的更新，而这里的更新是刷新了整个页面</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC24%E8%8A%82%EF%BC%9A-%E5%89%A7%E7%BB%88%EF%BC%9A-webpack%E8%87%AA%E5%AD%A6%E6%8A%80%E5%B7%A7%E4%BC%A0%E6%8E%88"><span class="nav-number">86.</span> <span class="nav-text">第24节： 剧终： webpack自学技巧传授</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%A6%E4%B9%A0%E6%8E%A8%E8%8D%90"><span class="nav-number">87.</span> <span class="nav-text">学习推荐</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Webpack%E6%8F%92%E4%BB%B6"><span class="nav-number">88.</span> <span class="nav-text">Webpack插件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#webpack%E4%B9%8B%E7%9B%91%E6%B5%8B%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E4%BF%AE%E6%94%B9%E8%80%8C%E8%87%AA%E5%8A%A8%E6%9E%84%E5%BB%BA"><span class="nav-number">89.</span> <span class="nav-text">webpack之监测配置文件的修改而自动构建</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#webpack-npm-install-%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3"><span class="nav-number">90.</span> <span class="nav-text">webpack npm install 报错解决</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Clean-plugin-for-webpack"><span class="nav-number">90.1.</span> <span class="nav-text">Clean plugin for webpack</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%B7%B1%E5%AE%9E%E7%8E%B0webpack-dev-server"><span class="nav-number">90.2.</span> <span class="nav-text">自己实现webpack-dev-server</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tree-shaking"><span class="nav-number">91.</span> <span class="nav-text">tree shaking</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#webpack%E5%8C%BA%E5%88%86-%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%E5%92%8C-production%E6%A8%A1%E5%BC%8F"><span class="nav-number">92.</span> <span class="nav-text">webpack区分 开发模式和 production模式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Code-Splitting%E2%80%93%E6%9C%89%E7%96%91%E9%97%AE"><span class="nav-number">93.</span> <span class="nav-text">Code Splitting–有疑问</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Lazy-Loading-%E6%87%92%E5%8A%A0%E8%BD%BD%EF%BC%8CChunk-%E6%98%AF%E4%BB%80%E4%B9%88%E2%80%93%E6%9C%89%E7%96%91%E9%97%AE"><span class="nav-number">94.</span> <span class="nav-text">Lazy Loading 懒加载，Chunk 是什么–有疑问</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%93%E5%8C%85%E5%88%86%E6%9E%90%EF%BC%8CPreloading-Prefetching"><span class="nav-number">95.</span> <span class="nav-text">打包分析，Preloading, Prefetching</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%8F%E7%9F%A5%E8%AF%86-%E6%96%87%E4%BB%B6%E5%88%A9%E7%94%A8%E7%8E%87"><span class="nav-number">95.1.</span> <span class="nav-text">小知识-文件利用率</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#webpack%E4%B8%8E%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98-Caching"><span class="nav-number">96.</span> <span class="nav-text">webpack与浏览器缓存(Caching)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#library%E6%89%93%E5%8C%85"><span class="nav-number">97.</span> <span class="nav-text">library打包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PWA%E6%89%93%E5%8C%85%E9%85%8D%E7%BD%AE"><span class="nav-number">98.</span> <span class="nav-text">PWA打包配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TypeScript-%E6%89%93%E5%8C%85%E9%85%8D%E7%BD%AE"><span class="nav-number">99.</span> <span class="nav-text">TypeScript 打包配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#webpack%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="nav-number">100.</span> <span class="nav-text">webpack性能优化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E9%A1%B5%E9%9D%A2%E6%89%93%E5%8C%85%E9%85%8D%E7%BD%AE"><span class="nav-number">101.</span> <span class="nav-text">多页面打包配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AAloader"><span class="nav-number">102.</span> <span class="nav-text">如何编写一个loader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AAPlugin"><span class="nav-number">103.</span> <span class="nav-text">如何编写一个Plugin</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%A8node%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7%E8%B0%83%E8%AF%95webpack"><span class="nav-number">103.1.</span> <span class="nav-text">用node调试工具调试webpack</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CreateReactApp-https-github-com-facebook-create-react-app%EF%BC%89%E9%A1%B9%E7%9B%AEWebpack%E8%A7%A3%E6%9E%90"><span class="nav-number">104.</span> <span class="nav-text">[CreateReactApp](https:&#x2F;&#x2F;github.com&#x2F;facebook&#x2F;create-react-app）项目Webpack解析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Vue%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE"><span class="nav-number">105.</span> <span class="nav-text">Vue项目配置</span></a></li></ol></div>
        </section>
        <!--/noindex-->

        <section class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">believeZJP</p>
  <div class="site-description" itemprop="description">积土成山，风雨兴焉；积水成渊，蛟龙生焉;</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">96</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">88</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </section>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://believezjp.oriht.com/posts/Webpack-%E6%88%90%E7%A5%9E%E4%B9%8B%E8%B7%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="believeZJP">
      <meta itemprop="description" content="积土成山，风雨兴焉；积水成渊，蛟龙生焉;">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="believeZJP">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Webpack 基础教程
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-12-05 14:47:39" itemprop="dateCreated datePublished" datetime="2018-12-05T14:47:39+08:00">2018-12-05</time>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>0</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>[TOC]</p>
<blockquote>
<p>慢慢来 其实比较快<br> 学习尽量做到知其然知其所以然</p>
</blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="http://jspang.com/post/webpack4x.html">视频教程来源</a><br>这篇笔记是jspang教程的学习笔记</li>
</ul>
<h2 id="第01节：认识WebPack的作用"><a href="#第01节：认识WebPack的作用" class="headerlink" title="第01节：认识WebPack的作用"></a>第01节：认识WebPack的作用</h2><h2 id="什么是WebPack"><a href="#什么是WebPack" class="headerlink" title="什么是WebPack"></a>什么是WebPack</h2><blockquote>
<p>WebPack可以看做是模块打包机：它做的事情是，分析你的项目结构，找到JavaScript模块以及其它的一些浏览器不能直接运行的拓展语言（Sass，TypeScript等），并将其转换和打包为合适的格式供浏览器使用。在4.0出现后，Webpack还肩负起了优化项目的责任。</p>
</blockquote>
<h2 id="重点"><a href="#重点" class="headerlink" title="重点"></a>重点</h2><ol>
<li>打包：可以把多个Javascript文件打包成一个文件，减少服务器压力和下载带宽。</li>
<li>转换：把拓展语言转换成为普通的JavaScript，让浏览器顺利运行。</li>
<li>优化：前端变的越来越复杂后，性能也会遇到问题，而WebPack也开始肩负起了优化和提升性能的责任。</li>
</ol>
<a id="more"></a>

<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h2 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h2><p>必须先安装node(node -v来查看node安装情况和版本)</p>
<h3 id="全局安装"><a href="#全局安装" class="headerlink" title="全局安装"></a>全局安装</h3><p>webpack官方<strong>不推荐全局安装</strong>。这会将您项目中的 webpack 锁定到指定版本，并且在使用不同的 webpack 版本的项目中，可能会导致构建失败。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g webpack</span><br></pre></td></tr></table></figure>

<h3 id="对项目目录进行安装"><a href="#对项目目录进行安装" class="headerlink" title="对项目目录进行安装"></a>对项目目录进行安装</h3><ol>
<li>先对项目进行初始化</li>
<li>然后在项目目录中进行安装</li>
<li>用webpack -v 查看版本</li>
</ol>
<blockquote>
<p>–save 保存到package.json文件中<br>  dev 保存到开发环境中而生产环境中不使用</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br><span class="line"></span><br><span class="line">npm install --save-dev webpack webpack-cli</span><br><span class="line">npm install --D webpack webpack-cli</span><br><span class="line"><span class="comment"># 安装指定版本</span></span><br><span class="line">npm install webpack@4.16.5</span><br></pre></td></tr></table></figure>

<p>查看webpack版本<br><code>npx webpack -v</code></p>
<h3 id="npx"><a href="#npx" class="headerlink" title="npx"></a>npx</h3><p>解决的主要问题就是调用项目内部安装的模块,还能避免全局安装的模块</p>
<p>npx 的原理很简单，就是运行的时候，会到node_modules/.bin路径和环境变量$PATH里面，检查命令是否存在。</p>
<p>由于 npx 会检查环境变量$PATH，所以系统命令也可以调用。</p>
<p>4.39.3</p>
<h4 id="小知识"><a href="#小知识" class="headerlink" title="小知识"></a>小知识</h4><p><strong>开发环境and生产环境：</strong></p>
<blockquote>
<p>开发环境：在开发时需要的环境，这里指在开发时需要依赖的包。<br>生产环境：程序开发完成，开始运行后的环境，这里指要使项目运行，所需要的依赖包。</p>
</blockquote>
<h2 id="第二节-快速上手一个Demo"><a href="#第二节-快速上手一个Demo" class="headerlink" title="第二节 快速上手一个Demo"></a>第二节 快速上手一个Demo</h2><h2 id="建立基本项目结构"><a href="#建立基本项目结构" class="headerlink" title="建立基本项目结构"></a>建立基本项目结构</h2><p>创建一个项目目录，进入后在根目录建立两个文件夹，分别是src文件夹和dist文件夹：</p>
<blockquote>
<p>src文件夹：用来存放我们编写的javascript代码(源代码)<br>dist文件夹：用来存放供浏览器读取的文件，这个是webpack打包成的文件。</p>
</blockquote>
<ol>
<li><p>在dist中新建index.html</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>webpack tutorials<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;title&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>在src中新建entry.js</p>
</li>
</ol>
<p>src/entery.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&#x27;title&#x27;</span>).innerHTML=<span class="string">&#x27;Hello Webpack&#x27;</span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这个文件的代码很简单，就是在&lt;div id=”title”&gt;&lt;/div&gt;标签里写入Hello Webpack这句话。</p>
</blockquote>
<h3 id="第一次Webpack打包"><a href="#第一次Webpack打包" class="headerlink" title="第一次Webpack打包"></a>第一次Webpack打包</h3><p>在终端中用命令行打包。 语法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack &#123;entry file&#125; &#123;destination <span class="keyword">for</span> bundled file&#125;</span><br></pre></td></tr></table></figure>

<p>在这个项目中，执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack src/entry.js dist/bundle.js</span><br></pre></td></tr></table></figure>

<p>执行成功后，会在dist文件夹中出现bundle.js,用浏览器查看index.html可以查看效果</p>
<h2 id="总结-第2节"><a href="#总结-第2节" class="headerlink" title="总结-第2节"></a>总结-第2节</h2><p>从这个Demo中你会了解到webpack的基本用法和使用过程，</p>
<p>并学会了命令行打包的方法。</p>
<p>在这节文章的最后，还是要强调，你一定要把本节内容在自己的电脑上敲一遍，这样你才能深入了解。</p>
<h2 id="在浏览器中用live-server访问文件"><a href="#在浏览器中用live-server访问文件" class="headerlink" title="在浏览器中用live-server访问文件"></a>在浏览器中用live-server访问文件</h2><h3 id="用命令行"><a href="#用命令行" class="headerlink" title="用命令行"></a>用命令行</h3><ol>
<li><p>安装live-server</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g live-server</span><br></pre></td></tr></table></figure>
</li>
<li><p>在该项目中用命令行</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">live-server</span><br></pre></td></tr></table></figure>

<p>即可在浏览器中访问文件</p>
<h3 id="用webpack的scripts命令封装"><a href="#用webpack的scripts命令封装" class="headerlink" title="用webpack的scripts命令封装"></a>用webpack的scripts命令封装</h3><ol>
<li><p>在package.json的scripts中</p>
 <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">&quot;server&quot;: &quot;live-server ./ --port=9090&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run server</span><br></pre></td></tr></table></figure>

<h2 id="第03节：配置文件：入口和出口"><a href="#第03节：配置文件：入口和出口" class="headerlink" title="第03节：配置文件：入口和出口"></a>第03节：配置文件：入口和出口</h2><p>这节课我们就学习配置文件的大体结构和入口出口文件的配置。</p>
<h2 id="配置文件webpack-config-js"><a href="#配置文件webpack-config-js" class="headerlink" title="配置文件webpack.config.js"></a>配置文件webpack.config.js</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">// 入口文件</span></span><br><span class="line">    entry: &#123;&#125;,</span><br><span class="line">    <span class="comment">// 出口文件的配置项</span></span><br><span class="line">    output: &#123;&#125;,</span><br><span class="line">    <span class="comment">// 模块,例如编译css,js,转换图片，压缩，合并</span></span><br><span class="line">    <span class="built_in">module</span>: &#123;&#125;,</span><br><span class="line">    <span class="comment">// 插件，用于生产模板和各项功能</span></span><br><span class="line">    plugins: [],</span><br><span class="line">    <span class="comment">// 配置webpack开发服务功能</span></span><br><span class="line">    devServer: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>entry：配置入口文件的地址，可以是单一入口，也可以是多入口。<br>output：配置出口文件的地址，在webpack2.X版本后，支持多出口配置。<br>module：配置模块，主要是解析CSS和图片转换压缩等功能。<br>plugins：配置插件，根据你的需要配置不同功能的插件。<br>devServer：配置开发服务功能。</p>
</blockquote>
<h2 id="entry选项（入口配置）"><a href="#entry选项（入口配置）" class="headerlink" title="entry选项（入口配置）"></a>entry选项（入口配置）</h2><p>配置要压缩的文件。一般是JavaScript，也可以是CSS文件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 入口文件配置</span></span><br><span class="line">entry: &#123;</span><br><span class="line">    <span class="comment">// 里面的entry可以随便起名字，外面的是固定的</span></span><br><span class="line">    entry: <span class="string">&#x27;./src/entry.js&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="output-出口配置"><a href="#output-出口配置" class="headerlink" title="output(出口配置)"></a>output(出口配置)</h2><p>配置webpack最后打包文件的地址和名称。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 出口文件配置</span></span><br><span class="line">output: &#123;</span><br><span class="line">    <span class="comment">// 打包的文件位置</span></span><br><span class="line">    path: path.resolve(__dirname, &#x27;dist&#x27;),</span><br><span class="line">    <span class="comment">// 打包的文件名称</span></span><br><span class="line">    filename: &#x27;bundle.js&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>需要在webpack.config.js头部引入path</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>path.resolve(__dirname, ‘dist’) 获取项目的绝对路径<br>filename: 打包后的文件名称。</p>
</blockquote>
<h3 id="webpack单文件入口配置代码"><a href="#webpack单文件入口配置代码" class="headerlink" title="webpack单文件入口配置代码"></a>webpack单文件入口配置代码</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">// 入口文件</span></span><br><span class="line">    entry: <span class="string">&#x27;./src/entry.js&#x27;</span>,</span><br><span class="line">    <span class="comment">// 出口文件的配置项</span></span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.resolve(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        filename: <span class="string">&#x27;bundle.js&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 模块,例如编译css,js,转换图片，压缩，合并</span></span><br><span class="line">    <span class="built_in">module</span>: &#123;&#125;,</span><br><span class="line">    <span class="comment">// 插件，用于生产模板和各项功能</span></span><br><span class="line">    plugins: [],</span><br><span class="line">    <span class="comment">// 配置webpack开发服务功能</span></span><br><span class="line">    devServer: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配置完成后，在终端直接输入webpack就会打包</p>
<h2 id="多入口、多出口配置"><a href="#多入口、多出口配置" class="headerlink" title="多入口、多出口配置"></a>多入口、多出口配置</h2><p>在entry配置多个文件，</p>
<p>在output处配置文件名为动态的</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">// 入口文件</span></span><br><span class="line">    entry: &#123;</span><br><span class="line">        entry: <span class="string">&#x27;./src/entry.js&#x27;</span>,</span><br><span class="line">        entry2: <span class="string">&#x27;./src/entry2.js&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 出口文件的配置项</span></span><br><span class="line">    output: &#123;</span><br><span class="line">        <span class="comment">// 输出的路径</span></span><br><span class="line">        path: path.resolve(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        publicPath: <span class="string">&#x27;http://www.cdn.com/assets/&#x27;</span>,</span><br><span class="line">        <span class="comment">// 输出文件的名称</span></span><br><span class="line">        filename: <span class="string">&#x27;[name].js&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 模块,例如编译css,js,转换图片，压缩，合并</span></span><br><span class="line">    <span class="built_in">module</span>: &#123;&#125;,</span><br><span class="line">    <span class="comment">// 插件，用于生产模板和各项功能</span></span><br><span class="line">    plugins: [],</span><br><span class="line">    <span class="comment">// 配置webpack开发服务功能</span></span><br><span class="line">    devServer: &#123;&#125;,</span><br><span class="line">    mode: <span class="string">&#x27;production&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>[mode]: webpack中新增的配置，分为开发，线上。可以在命令行后面添加如: <code>webpack --mode=development</code><br>[publicPath]: 自动将cdn路径添加到代码里的资源链接上<br>[plugin]: 可以在webpack运行到某个时刻时，帮你做一些事情<br>[name]： 根据入口文件的名称，打包成相同的名称，有几个入口文件，就打包成几个文件。</p>
<h2 id="总结-第3节"><a href="#总结-第3节" class="headerlink" title="总结-第3节"></a>总结-第3节</h2><p>任何项目的webpack都要执行这些操作。需要牢记</p>
<blockquote>
<p>小知识</p>
</blockquote>
<ol>
<li>调试js文件</li>
</ol>
<p>在js中写console.log()</p>
<p>直接在命令行</p>
<p>node index.js，</p>
<p>即可在终端查看打印内容</p>
<h2 id="第4节：-配置文件：服务和热更新"><a href="#第4节：-配置文件：服务和热更新" class="headerlink" title="第4节： 配置文件：服务和热更新"></a>第4节： 配置文件：服务和热更新</h2><p>热更新：所见即所得</p>
<h2 id="设置webpack-dev-server"><a href="#设置webpack-dev-server" class="headerlink" title="设置webpack-dev-server"></a>设置webpack-dev-server</h2><ol>
<li>先安装webpack-dev-server</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack-dev-server --save-dev</span><br></pre></td></tr></table></figure>

<ol>
<li>配置devServer</li>
</ol>
<p>webpack.config.js</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">    <span class="comment">// 设置基本目录结构</span></span><br><span class="line">    contentBase: path.resolve(__dirname, &#x27;dist&#x27;),</span><br><span class="line">    <span class="comment">// 服务器的IP地址，可以是IP也可以是localhost</span></span><br><span class="line">    host: &#x27;localhost&#x27;,</span><br><span class="line">    <span class="comment">// 服务端压缩是否开启</span></span><br><span class="line">    compress: true,</span><br><span class="line">    <span class="comment">// 配置服务端口</span></span><br><span class="line">    port: 8089,</span><br><span class="line">    <span class="comment">// 默认打开浏览器，可以用字符串代替用哪个浏览器打开. &#x27;Google Chrome&#x27;, 可以代替--open</span></span><br><span class="line">    open: true,</span><br><span class="line">    <span class="comment">// 路由代理打到前端框架</span></span><br><span class="line">    historyApiFallback: true,</span><br><span class="line">    <span class="comment">// 开启hotModuleReplace</span></span><br><span class="line">    hot: true,</span><br><span class="line">    <span class="comment">// 如果打包报错，直接在页面上展示错误，而不是在终端展示错误</span></span><br><span class="line">    overlay: true,</span><br><span class="line">    proxy: &#123;</span><br><span class="line">        &#x27;/api&#x27;: &#x27;http://localhost:3000&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>配置scripts</li>
</ol>
<p>package.json</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;server&quot;: &quot;webpack-dev-server --open&quot;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<h3 id="在这里直接设置-–open即可自动打开浏览器"><a href="#在这里直接设置-–open即可自动打开浏览器" class="headerlink" title="在这里直接设置 –open即可自动打开浏览器"></a>在这里直接设置 –open即可自动打开浏览器</h3><ol>
<li>在终端里输入npm run server 打开服务器，在浏览器中输入<a target="_blank" rel="noopener" href="http://localhost:8089/">http://localhost:8089</a>即可看到结果</li>
</ol>
<h3 id="historyApiFallback"><a href="#historyApiFallback" class="headerlink" title="historyApiFallback"></a>historyApiFallback</h3><p>webpack不配置这个的话，正常的react请求会直接请求到服务端，不会走react内部的路由</p>
<p><a target="_blank" rel="noopener" href="https://www.webpackjs.com/configuration/dev-server/#devserver-historyapifallback">historyApiFallback</a>就是解决这个问题</p>
<p>TODO<br>到了线上要配置NGINX，让路由打到项目里</p>
<h2 id="支持热更新"><a href="#支持热更新" class="headerlink" title="支持热更新"></a>支持热更新</h2><p>npm run server 启动后，有一种监控机制(watch), 监控修改源码，并立即在浏览器里更新。</p>
<p><strong>注意</strong>：webpack 3.6版本以后内置热更新功能，不需要额外操作。</p>
<p>proxy设置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">proxy: &#123;</span><br><span class="line">    <span class="string">&#x27;/react/api&#x27;</span>: <span class="string">&#x27;http://www.dell-lee.com&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;/react/api&#x27;</span>: &#123;</span><br><span class="line">        target: <span class="string">&#x27;http://www.dell-lee.com&#x27;</span></span><br><span class="line">        <span class="comment">// https接口需要配置这个</span></span><br><span class="line">        secure: <span class="literal">false</span>,</span><br><span class="line">        <span class="comment">// 解决某些网站对源限制</span></span><br><span class="line">        changeOrigin: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// 在配置里请求转发，代码里请求header.json，实际去请求demo.json，省去修改代码里接口的麻烦</span></span><br><span class="line">        pathRewrite: &#123;</span><br><span class="line">            <span class="string">&#x27;header.json&#x27;</span>: <span class="string">&#x27;demo.json&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="第5节：-模块：CSS文件打包"><a href="#第5节：-模块：CSS文件打包" class="headerlink" title="第5节： 模块：CSS文件打包"></a>第5节： 模块：CSS文件打包</h2><p>webpack在生产环境中的作用之一：减少http请求数，把多个文件打包到一个js文件中，请求数可以减少好多。</p>
<p>学习css文件打包之前，<strong>需要先对webpack.config.js里的Loaders配置项进行了解</strong>。</p>
<h2 id="Loaders"><a href="#Loaders" class="headerlink" title="Loaders"></a>Loaders</h2><p>Loaders是Webpack最重要的功能之一，也是如此盛行的原因。</p>
<p>通过配置不同的Loaders，Webpack可以用脚本和工具对不同的文件格式进行特定的处理。</p>
<p>例子：</p>
<blockquote>
<p>可以把less, sass转换成css,而不使用其他工具<br> 写代码时，可以用ES6, ES7语法，转换成大多数浏览器兼容的代码<br> 可以把React中的jsx转换成JavaScript代码</p>
</blockquote>
<p><strong>注意：</strong><br>所有Loaders都要在npm中单独安装，并在webpack.config.js中配置，下面对几种配置型简单梳理。</p>
<blockquote>
<p>test: 用于匹配处理文件扩展名的表达式，【必须设置】；<br> use: loader名称，【必须配置，否则报错】；<br> include/exclude: 手动添加必须处理的文件/文件夹，或屏蔽不需要处理的文件/文件夹,【可选】；<br> query: 为loaders提供额外的设置选项，【可选】。</p>
</blockquote>
<h2 id="打包CSS文件"><a href="#打包CSS文件" class="headerlink" title="打包CSS文件"></a>打包CSS文件</h2><h3 id="建立index-css文件"><a href="#建立index-css文件" class="headerlink" title="建立index.css文件"></a>建立index.css文件</h3><p>在src/css 目录下，建一个index.css文件</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>css 文件建立好后，需要引入到入口文件中，才可以打包到dist中。</p>
<p>这里引入到entry.js中</p>
<p>src/entry.js首行加入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> css <span class="keyword">from</span> <span class="string">&#x27;./css/index.css&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="这里行末一定要加分号，没加就无法编译CSS文件报错"><a href="#这里行末一定要加分号，没加就无法编译CSS文件报错" class="headerlink" title="这里行末一定要加分号，没加就无法编译CSS文件报错"></a>这里行末一定要加分号，没加就无法编译CSS文件报错</h3><p>CSS 引入后，需要使用loader来解析CSS文件，这里用到style-loader,css-loader.</p>
<h3 id="style-loader-官网"><a href="#style-loader-官网" class="headerlink" title="style-loader 官网"></a>style-loader <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/style-loader">官网</a></h3><p>用来处理css文件中的url()等。</p>
<p>安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install style-loader --save-dev</span><br></pre></td></tr></table></figure>

<h3 id="css-loader-官网"><a href="#css-loader-官网" class="headerlink" title="css-loader 官网"></a>css-loader <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/css-loader">官网</a></h3><p>用来将css插入到页面的style标签。<br>安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install css-loader --save-dev</span><br></pre></td></tr></table></figure>

<p>两个都安装好后，开始配置loaders</p>
<h3 id="loaders配置"><a href="#loaders配置" class="headerlink" title="loaders配置"></a>loaders配置</h3><p>修改webpack.config.js中的module属性，代码如下：</p>
<p>webpack.config.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">            use: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">            use: [</span><br><span class="line">                <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">                &#123;</span><br><span class="line">                    loader: <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">                    options: &#123;</span><br><span class="line">                        importLoaders: <span class="number">2</span>,</span><br><span class="line">                        modules: <span class="literal">true</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><code>modules: true</code> 使用css模块化<br><code>importLoaders</code>: 在 css-loader 前应用的 loader 的数量， 用于在css文件中引入css文件，让loader也去处理引入文件中的样式</p>
<h3 id="loader三种写法"><a href="#loader三种写法" class="headerlink" title="loader三种写法"></a>loader三种写法</h3><ol>
<li><p>直接用use</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">            use: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>把use换成loader</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        loader: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>]</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>用use+loader</p>
</li>
</ol>
<p>这种最常用，因为每个都有不同的配置项！！</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">            use: [</span><br><span class="line">                &#123;<span class="attr">loader</span>: <span class="string">&#x27;style-loader&#x27;</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">loader</span>: <span class="string">&#x27;css-loader&#x27;</span>&#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="用哪种写法都可以，可以看出webpack的扩展和灵活性非常强"><a href="#用哪种写法都可以，可以看出webpack的扩展和灵活性非常强" class="headerlink" title="用哪种写法都可以，可以看出webpack的扩展和灵活性非常强"></a>用哪种写法都可以，可以看出webpack的扩展和灵活性非常强</h4><p>最重要的是： 看见别人项目的其他写法也不要慌张，自己试试，有可能Get到新知识。</p>
<h2 id="总结-第5节"><a href="#总结-第5节" class="headerlink" title="总结-第5节"></a>总结-第5节</h2><p>loader的使用决定了webpack水平的高低，一定要重视和练习。</p>
<h2 id="第6节：-插件配置：-配置JS压缩"><a href="#第6节：-插件配置：-配置JS压缩" class="headerlink" title="第6节： 插件配置： 配置JS压缩"></a>第6节： 插件配置： 配置JS压缩</h2><h2 id="压缩JS代码"><a href="#压缩JS代码" class="headerlink" title="压缩JS代码"></a>压缩JS代码</h2><p>引入uglifyjs-webpack-plugin(js压缩插件，简称uglify)</p>
<p>注意： 虽然uglifyjs是插件，但webpack版本已默认集成，不需要再次安装。</p>
<h3 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h3><p>在webpack.config.js中引入插件，</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> uglify = <span class="built_in">require</span>(<span class="string">&#x27;uglifyjs-webpack-plugin&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>引入后，在plugins配置里new一个uglify对象。代码如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">    <span class="keyword">new</span> uglify()</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>这里执行webpack是可以打包成功的</p>
<h3 id="但是执行npm-run-server时，报错-原因还待查-已找到"><a href="#但是执行npm-run-server时，报错-原因还待查-已找到" class="headerlink" title="但是执行npm run server时，报错,原因还待查     已找到 ***"></a>但是执行npm run server时，报错,原因<del>还待查</del>     已找到 ***</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ERROR <span class="keyword">in</span> entry.js <span class="keyword">from</span> UglifyJs</span><br><span class="line">Unexpected token: name (urlParts) [entry.js:<span class="number">317</span>,<span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">ERROR <span class="keyword">in</span> entry2.js <span class="keyword">from</span> UglifyJs</span><br><span class="line">Unexpected token: name (urlParts) [entry2.js:<span class="number">317</span>,<span class="number">4</span>]</span><br><span class="line">webpack: Failed to compile.</span><br></pre></td></tr></table></figure>

<p>首先要先弄清楚什么是开发环境， 什么是生产环境。</p>
<p>开发环境基本不会对js进行压缩，在开发预览时，需要明确的报错行数和错误信息，所以没有必要压缩JavaScript代码。</p>
<p>生产环境才会压缩js代码，用于加快程序的工作效率。</p>
<p>devServer用于开发环境，而压缩js用于生产环境，</p>
<p>在开发环境中做生产环境的事情所以<strong>webpack设置冲突报错</strong></p>
<h2 id="第7节：-插件配置：-HTML文件发布"><a href="#第7节：-插件配置：-HTML文件发布" class="headerlink" title="第7节： 插件配置： HTML文件发布"></a>第7节： 插件配置： HTML文件发布</h2><p>之前的index.html是直接放在dist文件夹中的，这是不对的。应该放在src目录中。</p>
<p>这节就学习如何把HTML文件打包到生产路径下。</p>
<h3 id="打包HTML文件"><a href="#打包HTML文件" class="headerlink" title="打包HTML文件"></a>打包HTML文件</h3><p>先将dist中的index.html剪切到src目录中，并去掉js引入代码(webpack会自动引入entry入口配置的js)，</p>
<p>因为这才是真实工作的目录结构。</p>
<h3 id="npm安装html-webpack-plugin-官网"><a href="#npm安装html-webpack-plugin-官网" class="headerlink" title="npm安装html-webpack-plugin 官网"></a>npm安装html-webpack-plugin <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/html-webpack-plugin">官网</a></h3><p>htmlWebpackPlugin会在打包结束后，自动生成一个html文件，并把打包生成的js自动引入到这个HTML文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev html-webpack-plugin</span><br></pre></td></tr></table></figure>

<h3 id="配置webpack-config-js"><a href="#配置webpack-config-js" class="headerlink" title="配置webpack.config.js"></a>配置webpack.config.js</h3><p>引入html-webpack-plugin插件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> htmlPlugin = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="在plugins里进行插件的配置，代码如下"><a href="#在plugins里进行插件的配置，代码如下" class="headerlink" title="在plugins里进行插件的配置，代码如下"></a>在plugins里进行插件的配置，代码如下</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">    <span class="keyword">new</span> htmlPlugin(&#123;</span><br><span class="line">        minify: &#123;</span><br><span class="line">            removeAttributeQuotes: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        hash: <span class="literal">true</span>,</span><br><span class="line">        template: <span class="string">&#x27;./src/index.html&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<blockquote>
<p>minify：是对html文件进行压缩，removeAttrubuteQuotes是去掉属性的双引号。<br> hash：为了开发中js有缓存效果，所以加入hash，这样可以有效避免缓存JS。<br> template：是要打包的html模版路径和文件名称。</p>
</blockquote>
<h2 id="打包出错"><a href="#打包出错" class="headerlink" title="打包出错"></a>打包出错</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ERROR <span class="keyword">in</span>   Error: Parse Error: &lt;!DOCTYPE&gt;</span><br><span class="line">  &lt;html&gt;</span><br></pre></td></tr></table></figure>

<p>原因，html页面的声明，必须是</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// <span class="meta">&lt;!DOCTYPE&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>html文件的打包可以有效的区分开发目录和生产目录，在webpack的配置中也要搞清楚哪些配置用于生产环境，哪些配置用于开发环境，避免两种环境的配置冲突。</p>
<h2 id="第8节：-图片迈坑：-css中的图片处理"><a href="#第8节：-图片迈坑：-css中的图片处理" class="headerlink" title="第8节： 图片迈坑： css中的图片处理"></a>第8节： 图片迈坑： css中的图片处理</h2><p>webpack打包时遇到css中的图片处理坑。</p>
<blockquote>
<p>在开发环境中找得到图片，一打包后就找不到<br>  不知道如何正确引入HTML或CSS中的图片</p>
</blockquote>
<h3 id="3节课彻底走出webpack图片的坑"><a href="#3节课彻底走出webpack图片的坑" class="headerlink" title="3节课彻底走出webpack图片的坑"></a>3节课彻底走出webpack图片的坑</h3><p>找张图片，在src目录新建一个images的文件夹。把图片放入images文件夹。</p>
<p>在index.html中增加一个div，</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;img&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>css</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#img</span>&#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(../images/img.png);</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>webpack 直接编译，报错</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ERROR <span class="keyword">in</span> ./src/images/img.png</span><br><span class="line">Module parse failed: Unexpected character <span class="string">&#x27;�&#x27;</span> (1:0)</span><br><span class="line">You may need an appropriate loader to handle this file <span class="built_in">type</span>.</span><br><span class="line">(Source code omitted <span class="keyword">for</span> this binary file)</span><br></pre></td></tr></table></figure>

<h2 id="file-loader-url-loader"><a href="#file-loader-url-loader" class="headerlink" title="file-loader, url-loader"></a>file-loader, url-loader</h2><h2 id="1-命令行安装"><a href="#1-命令行安装" class="headerlink" title="1. 命令行安装"></a>1. 命令行安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev file-loader url-loader</span><br></pre></td></tr></table></figure>

<h3 id="file-loader"><a href="#file-loader" class="headerlink" title="file-loader"></a>file-loader</h3><p>解决引用路径的问题，拿background样式用url引用背景图来说，webpack会将各个模块打包成一个文件，因此我们源代码样式中的url路径是相对入口html页面的，而不是相对于原始css文件所在路径。这会导致图片引入失败。</p>
<p>这就是file-loader解决的。</p>
<p>file-loader可以解析项目中的url引入(不局限于css), 根据配置，将图片拷贝到相应的路径，再根据配置，打包后文件引用路径，使之指向正确的文件。</p>
<p>打包以后文件名保持不变，加hash值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: &#123;</span><br><span class="line">        test: <span class="regexp">/\.(jpg|png|gif)/</span>,</span><br><span class="line">        use: &#123;</span><br><span class="line">            loader: <span class="string">&#x27;file-loader&#x27;</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">                name: <span class="string">&#x27;[name]_[hash].[ext]&#x27;</span>,</span><br><span class="line">                outputPath: <span class="string">&#x27;images/&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="url-loader"><a href="#url-loader" class="headerlink" title="url-loader"></a>url-loader</h3><p>如果图片较多，会发送很多http请求，降低页面性能。</p>
<p>可以用url-loader解决。</p>
<p>url-loader会将引入的图片编码，生成DataURL(把图片转成一串字符),再把这串字符打包到文件中，最终只要引入这个文件就能访问图片。</p>
<p>图片较大，编码会消耗性能。url-loader提供了一个limit参数，小于limit字节的文件会被转为DataURL,大于limit的会使用file-loader进行copy</p>
<h2 id="2-配置url-loader"><a href="#2-配置url-loader" class="headerlink" title="2. 配置url-loader"></a>2. 配置url-loader</h2><p>webpack.config.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">            use: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.(png|jpg|gif)/</span>,</span><br><span class="line">            use: [</span><br><span class="line">                &#123;</span><br><span class="line">                    loader: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">                    options: &#123;</span><br><span class="line">                        limit: <span class="number">500000</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<blockquote>
<p>test:/.(png|jpg|gif)/是匹配图片文件后缀名称。<br> use：是指定使用的loader和loader的配置参数。<br> limit：是把小于500000B的文件打成Base64的格式，写入JS。</p>
</blockquote>
<p>现在就可以使用webpack打包了~~~~</p>
<p>用npm run server ，可以在页面查看元素，查看图片的编码</p>
<h2 id="为什么配置中只用了url-loader"><a href="#为什么配置中只用了url-loader" class="headerlink" title="为什么配置中只用了url-loader"></a>为什么配置中只用了url-loader</h2><p>为什么在配置中只用了url-loader，依然打包成功？</p>
<p>需要了解url-loader和file-loader关系</p>
<p>url-loader封装了file-loader，url-loader不依赖file-loader，即 使用url-loader时，只需要安装url-loader即可，不需要安装file-loader，因为url-loader内置了file-loader。</p>
<p>url-loader工作分两种情况：</p>
<ol>
<li>文件大小小于limit，url-loader将文件转为DataURL(Base64格式)</li>
<li>文件大小大于limit，url-loader会调用file-loader进行处理，参数也会直接传给file-loader</li>
</ol>
<p>也就是说，安装一个url-loader即可，但是为了以后操作方便，顺便安装了file-loader。</p>
<h2 id="总结-第8节"><a href="#总结-第8节" class="headerlink" title="总结-第8节"></a>总结-第8节</h2><p>本节学习了将小图打包成Base64格式， 对webpack图片打包有了基本的了解</p>
<h2 id="第9节-图片迈坑：-CSS分离与图片路径处理"><a href="#第9节-图片迈坑：-CSS分离与图片路径处理" class="headerlink" title="第9节 图片迈坑： CSS分离与图片路径处理"></a>第9节 图片迈坑： CSS分离与图片路径处理</h2><p>主要学习</p>
<ol>
<li>把CSS从JavaScript代码中分离出来，</li>
<li>如何处理分离出来后的CSS中的图片路径不对的问题。</li>
</ol>
<h2 id="CSS分离：-extract-text-webpack-plugin-官网"><a href="#CSS分离：-extract-text-webpack-plugin-官网" class="headerlink" title="CSS分离： extract-text-webpack-plugin 官网"></a>CSS分离： extract-text-webpack-plugin <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/extract-text-webpack-plugin">官网</a></h2><p>之前的css是打包到JavaScript代码中的。</p>
<p>有些页面，JavaScript代码很少，而css很多，要求将css单独提取出来，方便以后更改，遇到这种需求，</p>
<p>解决办法就是extract-text-webpack-plugin</p>
<p>这个插件可以完美解决提取CSS的需求。但webpack官网不建议这样做，他们认为css就应该打包到JavaScript中以减少http请求数。</p>
<p>但现实中的需求我们无法控制，有些需求是我们不能控制的，分离css就是这样一个既合理又不合理的需求。</p>
<h3 id="1-npm-安装"><a href="#1-npm-安装" class="headerlink" title="1. npm 安装"></a>1. npm 安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev extract-text-webpack-plugin</span><br></pre></td></tr></table></figure>

<h3 id="2-引入"><a href="#2-引入" class="headerlink" title="2. 引入"></a>2. 引入</h3><p>安装完成后，需要先require引入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> extractTextPlugin = <span class="built_in">require</span>(<span class="string">&#x27;extract-text-webpack-plugin&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="3-设置Plugins"><a href="#3-设置Plugins" class="headerlink" title="3. 设置Plugins"></a>3. 设置Plugins</h3><p>引入成功后，需要在plugins属性中进行配置。这里只要new一下这个对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">    <span class="keyword">new</span> htmlPlugin(&#123;</span><br><span class="line">        minify: &#123;</span><br><span class="line">            removeAttributeQuotes: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        hash: <span class="literal">true</span>,</span><br><span class="line">        template: <span class="string">&#x27;./src/index.html&#x27;</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> extractTextPlugin(<span class="string">&#x27;css/index.css&#x27;</span>)</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<p>这里的/css/index.css是分离后的路径位置。注意： 这里路径前面不要加/,否则引用css的路径，会多一个/</p>
<h3 id="4-修改原来的stye-loader-css-loader"><a href="#4-修改原来的stye-loader-css-loader" class="headerlink" title="4. 修改原来的stye-loader, css-loader"></a>4. 修改原来的stye-loader, css-loader</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">            use: extractTextPlugin.extract(&#123;</span><br><span class="line">                fallback: <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">                use: <span class="string">&#x27;css-loader&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.(png|jpg|gif)/</span>,</span><br><span class="line">            use: [</span><br><span class="line">                &#123;</span><br><span class="line">                    loader: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">                    options: &#123;</span><br><span class="line">                        limit: <span class="number">500000</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>完成4步操作后，可以用webpack打包。</p>
<h3 id="打包结果"><a href="#打包结果" class="headerlink" title="打包结果"></a>打包结果</h3><ul>
<li>css被单独提取到css/index.css文件</li>
<li>图片也被Base64编码到index.css文件</li>
<li>index.html文件中引入了index.css</li>
</ul>
<h2 id="图片路径问题"><a href="#图片路径问题" class="headerlink" title="图片路径问题"></a>图片路径问题</h2><p>利用extract-text-wbpack-plugin 轻松的把css文件分离了出来，但css路径并不正确。</p>
<p>可以在这里先build一下看下效果。图片不会显示</p>
<blockquote>
<p><strong>最好的解决方案，使用publicPath解决</strong></p>
</blockquote>
<p>publicPath: 是在webpack.config.js文件中的output选项中，主要作用就是处理静态文件路径的。</p>
<h3 id="1-处理前，在webpack-config-js上方声明一个对象，叫website"><a href="#1-处理前，在webpack-config-js上方声明一个对象，叫website" class="headerlink" title="1. 处理前，在webpack.config.js上方声明一个对象，叫website"></a>1. 处理前，在webpack.config.js上方声明一个对象，叫website</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 教程里这里写的是IP地址</span></span><br><span class="line"><span class="keyword">const</span> website = &#123;</span><br><span class="line">    publicPath: <span class="string">&#x27;http://localhost:8089/&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里的ip和端口是本机的IP或DevServer配置的ip和端口。</p>
<h4 id="后面加-不加-，测试了一下不加-，可以查看css或图片路径，是不正确的"><a href="#后面加-不加-，测试了一下不加-，可以查看css或图片路径，是不正确的" class="headerlink" title="后面加/ 不加/，测试了一下不加/，可以查看css或图片路径，是不正确的"></a>后面加/ 不加/，测试了一下不加/，可以查看css或图片路径，是不正确的</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 错误的</span><br><span class="line"><span class="selector-tag">background-image</span>: <span class="selector-tag">url</span>(<span class="selector-tag">http</span>://<span class="selector-tag">localhost</span><span class="selector-pseudo">:8089images</span>/313455<span class="selector-tag">c00642024bfd21003ced8bf0e6</span><span class="selector-class">.png</span>);</span><br><span class="line">// 正确的</span><br><span class="line"><span class="selector-tag">background-image</span>: <span class="selector-tag">url</span>(<span class="selector-tag">http</span>://<span class="selector-tag">localhost</span><span class="selector-pseudo">:8089</span>/<span class="selector-tag">images</span>/313455<span class="selector-tag">c00642024bfd21003ced8bf0e6</span><span class="selector-class">.png</span>);</span><br></pre></td></tr></table></figure>

<h3 id="2-在output选项中引用这个对象的publicPath属性"><a href="#2-在output选项中引用这个对象的publicPath属性" class="headerlink" title="2. 在output选项中引用这个对象的publicPath属性"></a>2. 在output选项中引用这个对象的publicPath属性</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">output: &#123;</span><br><span class="line">    <span class="comment">// 输出的路径</span></span><br><span class="line">    path: path.resolve(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">    <span class="comment">// 输出文件的名称</span></span><br><span class="line">    filename: <span class="string">&#x27;[name].js&#x27;</span>,</span><br><span class="line">    publicPath: website.publicPath</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="3-用webpack打包"><a href="#3-用webpack打包" class="headerlink" title="3. 用webpack打包"></a>3. 用webpack打包</h3><p>可以看到，文件中的相对路径被替换成绝对路径。这样来讲速度更快。</p>
<h2 id="总结-第9节"><a href="#总结-第9节" class="headerlink" title="总结-第9节"></a>总结-第9节</h2><p>实现了css分离，并处理了分离后图片路径不对的问题。</p>
<p>处理的方法要充分理解，在工作中经常用到。</p>
<h3 id="更改webpack-config-js文件-不会热更新"><a href="#更改webpack-config-js文件-不会热更新" class="headerlink" title="更改webpack.config.js文件 不会热更新"></a>更改webpack.config.js文件 不会热更新</h3><h2 id="第10节：-图片迈坑：-处理HTML中的图片"><a href="#第10节：-图片迈坑：-处理HTML中的图片" class="headerlink" title="第10节： 图片迈坑： 处理HTML中的图片"></a>第10节： 图片迈坑： 处理HTML中的图片</h2><p>在webpack中不推荐使用img来引入图片，但我们通常都用这种写法。为此有人开发了：<br><strong>html-withimg-loader</strong> <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/html-withimg-loader">官网</a></p>
<p>可以很好的处理在HTML中引入图片的问题。</p>
<h3 id="1-安装"><a href="#1-安装" class="headerlink" title="1.安装"></a>1.安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install html-withimg-loader --save</span><br></pre></td></tr></table></figure>

<h3 id="2-配置loader"><a href="#2-配置loader" class="headerlink" title="2. 配置loader"></a>2. 配置loader</h3><p>webpack.config.js</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: /\.(html|html)$/i,</span><br><span class="line">    use: [&#x27;html-withimg-loader&#x27;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-执行打包"><a href="#3-执行打包" class="headerlink" title="3. 执行打包"></a>3. 执行打包</h3><p>可以发现images被很好的打包了。并且路径也完全正确</p>
<h2 id="总结-第10节"><a href="#总结-第10节" class="headerlink" title="总结-第10节"></a>总结-第10节</h2><p>三节课的时间，讲了webpack图片中的坑，所有问题应该都可以解决了.</p>
<h2 id="小知识-npm-run-build"><a href="#小知识-npm-run-build" class="headerlink" title="小知识 npm run build"></a>小知识 npm run build</h2><h3 id="没有打包npm-run-build，直接npm-run-server-无法看到最新结果"><a href="#没有打包npm-run-build，直接npm-run-server-无法看到最新结果" class="headerlink" title="没有打包npm run build，直接npm run server,无法看到最新结果"></a>没有打包npm run build，直接npm run server,无法看到最新结果</h3><h3 id="只有项目安装了webpack，如何打包"><a href="#只有项目安装了webpack，如何打包" class="headerlink" title="只有项目安装了webpack，如何打包"></a>只有项目安装了webpack，如何打包</h3><p>如果全局没有安装webpack的话，直接在命令行执行webpack会报错。</p>
<h4 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h4><p>在package.json中配置scripts选项，增加一个build命令，进行打包项目使用。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;server&quot;: &quot;webpack-dev-server --open&quot;,</span><br><span class="line">    &quot;build&quot;:&quot;webpack&quot;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<p>配置完后，在终端输入<strong>npm run build</strong> 即可打包</p>
<h3 id="如何把图片放到指定的文件夹下"><a href="#如何把图片放到指定的文件夹下" class="headerlink" title="如何把图片放到指定的文件夹下"></a>如何把图片放到指定的文件夹下</h3><p>前面打包的图片并没有放到images文件夹下，要放到images里，需配置url-loader ==outputPath==选项。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">            use: extractTextPlugin.extract(&#123;</span><br><span class="line">                fallback: <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">                use: <span class="string">&#x27;css-loader&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.(png|jpg|gif)/</span>,</span><br><span class="line">            use: [</span><br><span class="line">                &#123;</span><br><span class="line">                    loader: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">                    options: &#123;</span><br><span class="line">                        limit: <span class="number">5000</span>,</span><br><span class="line">                        outputPath: <span class="string">&#x27;images/&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>这样再执行打包，图片都被打包到images文件里。</p>
<h2 id="第11节：-CSS-进阶：-Less-文件的打包和分离"><a href="#第11节：-CSS-进阶：-Less-文件的打包和分离" class="headerlink" title="第11节： CSS 进阶： Less 文件的打包和分离"></a>第11节： CSS 进阶： Less 文件的打包和分离</h2><p>第5节中已经讲了CSS打包，分离。这节讲Less文件如何打包和分离。</p>
<p>Less是一门CSS预处理语言，扩展了CSS语言，增加了变量，Mixin，函数等特性，使CSS更易维护和扩展。</p>
<h2 id="打包Less文件"><a href="#打包Less文件" class="headerlink" title="打包Less文件"></a>打包Less文件</h2><h3 id="1-安装-官网"><a href="#1-安装-官网" class="headerlink" title="1. 安装 官网"></a>1. 安装 <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/less-loader">官网</a></h3><p>安装less服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev less</span><br></pre></td></tr></table></figure>

<p>安装less-loader供打包使用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev less-loader</span><br></pre></td></tr></table></figure>

<p>也可以一条命令安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev less-loader less</span><br></pre></td></tr></table></figure>

<h3 id="2-loader配置"><a href="#2-loader配置" class="headerlink" title="2. loader配置"></a>2. loader配置</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">    use: [&#123;</span><br><span class="line">        loader: <span class="string">&quot;style-loader&quot;</span> <span class="comment">// creates style nodes from JS strings</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        loader: <span class="string">&quot;css-loader&quot;</span> <span class="comment">// translates CSS into CommonJS</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        loader: <span class="string">&quot;less-loader&quot;</span> <span class="comment">// compiles Less to CSS</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-编写一个less文件"><a href="#3-编写一个less文件" class="headerlink" title="3. 编写一个less文件"></a>3. 编写一个less文件</h3><p>css/black.less</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@base: #000;</span><br><span class="line"><span class="selector-id">#gogo</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: @base;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-引入到entry-js"><a href="#4-引入到entry-js" class="headerlink" title="4. 引入到entry.js"></a>4. 引入到entry.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> less <span class="keyword">from</span> <span class="string">&#x27;./css/black.less&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>可以打包看效果<br>发现打包到了entry.js中，没有提取到css文件中</p>
<h2 id="把Less文件分离"><a href="#把Less文件分离" class="headerlink" title="把Less文件分离"></a>把Less文件分离</h2><p>之前讲了extract-text-webpack-plugin插件，分离Less也是用这个</p>
<h3 id="配置less的loader"><a href="#配置less的loader" class="headerlink" title="配置less的loader"></a>配置less的loader</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">    use: extractTextPlugin.extract(&#123;</span><br><span class="line">        use: [&#123;</span><br><span class="line">            loader: <span class="string">&quot;css-loader&quot;</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            loader: <span class="string">&quot;less-loader&quot;</span></span><br><span class="line">        &#125;],</span><br><span class="line">        <span class="comment">// use style-loader in development</span></span><br><span class="line">        fallback: <span class="string">&quot;style-loader&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="打包"><a href="#打包" class="headerlink" title="打包"></a>打包</h3><p>会看到less被打包到index.css文件中</p>
<p>此外，在官网看到了，修改后缀名的配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> extractLess = <span class="keyword">new</span> ExtractTextPlugin(&#123;</span><br><span class="line">    filename: <span class="string">&quot;[name].[contenthash].css&quot;</span>,</span><br><span class="line">    disable: process.env.NODE_ENV === <span class="string">&quot;development&quot;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="总结-第11节"><a href="#总结-第11节" class="headerlink" title="总结-第11节"></a>总结-第11节</h2><p>通过这节课， 就可以很轻松的编写less文件啦</p>
<h2 id="第12节：-CSS进阶：-SASS文件的打包和分离-官网"><a href="#第12节：-CSS进阶：-SASS文件的打包和分离-官网" class="headerlink" title="第12节： CSS进阶： SASS文件的打包和分离  官网"></a>第12节： CSS进阶： SASS文件的打包和分离  <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/sass-loader">官网</a></h2><p>上节学了less的打包，这节开始学习SASS打包</p>
<h3 id="1-安装两个包node-sass，sass-loader"><a href="#1-安装两个包node-sass，sass-loader" class="headerlink" title="1. 安装两个包node-sass，sass-loader"></a>1. 安装两个包<strong>node-sass，sass-loader</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install sass-loader node-sass webpack --save-dev</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<p>npm安装时，这个loader很容易安装失败。多次安装失败，最好把node_modules文件夹删除，再重新安装。</p>
<h3 id="2-编写loader配置"><a href="#2-编写loader配置" class="headerlink" title="2. 编写loader配置"></a>2. 编写loader配置</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">    use: [&#123;</span><br><span class="line">        loader: <span class="string">&quot;style-loader&quot;</span> <span class="comment">// creates style nodes from JS strings</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        loader: <span class="string">&quot;css-loader&quot;</span> <span class="comment">// translates CSS into CommonJS</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        loader: <span class="string">&quot;sass-loader&quot;</span> <span class="comment">// compiles Sass to CSS</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意loader的加载有先后顺序(从下到上，从右到左),可以直接从官网拷贝</p>
<h3 id="3-SASS-文件的编写"><a href="#3-SASS-文件的编写" class="headerlink" title="3.SASS 文件的编写"></a>3.SASS 文件的编写</h3><p>nav.scss,别忘了引入到entry.js中</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$nav-color</span>: <span class="number">#FFF</span>;</span><br><span class="line"><span class="selector-id">#nav</span> &#123;</span><br><span class="line">    <span class="variable">$width</span>:<span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="variable">$width</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">    backround-<span class="attribute">color</span>: <span class="variable">$nav-color</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sass <span class="keyword">from</span> <span class="string">&#x27;./css/nav.scss&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>此时，可以npm run server 查看效果。</p>
<h3 id="4-把SASS文件分离"><a href="#4-把SASS文件分离" class="headerlink" title="4. 把SASS文件分离"></a>4. 把SASS文件分离</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">    use: extractTextPlugin.extract(&#123;</span><br><span class="line">        use: [&#123;</span><br><span class="line">            loader: <span class="string">&quot;css-loader&quot;</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            loader: <span class="string">&quot;sass-loader&quot;</span></span><br><span class="line">        &#125;],</span><br><span class="line">        <span class="comment">// use style-loader in development</span></span><br><span class="line">        fallback: <span class="string">&quot;style-loader&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>至此，可以愉快的写sass代码了。</p>
<h2 id="小知识-D"><a href="#小知识-D" class="headerlink" title="小知识-D"></a>小知识-D</h2><p>-D 等于–save-dev</p>
<h2 id="第13节：CSS进阶：-自动处理CSS3属性前缀"><a href="#第13节：CSS进阶：-自动处理CSS3属性前缀" class="headerlink" title="第13节：CSS进阶： 自动处理CSS3属性前缀"></a>第13节：CSS进阶： 自动处理CSS3属性前缀</h2><p>css3属性不同浏览器对应的前缀名称不同，太多的话代码冗余工作繁杂。</p>
<p>这节学习如何用postcss-loader给css3属性自动添加前缀。</p>
<h2 id="什么是属性前缀"><a href="#什么是属性前缀" class="headerlink" title="什么是属性前缀"></a>什么是属性前缀</h2><p>CSS 属性前的-webkit,-ms,-moz这些前缀。为了兼容各个浏览器版本。</p>
<h3 id="PostCSS"><a href="#PostCSS" class="headerlink" title="PostCSS"></a>PostCSS</h3><p>css的处理平台，可以实现css的很多功能，这里只介绍一个加前缀的功能。</p>
<h3 id="1-安装-1"><a href="#1-安装-1" class="headerlink" title="1. 安装"></a>1. 安装</h3><p>需要安装两个包postcss-loader， autoprefixer(自动添加前缀的插件)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev postcss-loader autoprefixer</span><br></pre></td></tr></table></figure>

<h3 id="2-postcss-config-js"><a href="#2-postcss-config-js" class="headerlink" title="2. postcss.config.js"></a>2. postcss.config.js</h3><p>PostCSS推荐在项目根目录(和webpack.config.js同级)，建一个postcss.config.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="built_in">require</span>(<span class="string">&#x27;autoprefixer&#x27;</span>)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>引入了autoprefixer插件，让postCSS拥有添加前缀的能力。</p>
<h3 id="3-编写loader"><a href="#3-编写loader" class="headerlink" title="3. 编写loader"></a>3. 编写loader</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">      test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">      use: [</span><br><span class="line">            &#123;</span><br><span class="line">              loader: <span class="string">&quot;style-loader&quot;</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">              loader: <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">              options: &#123;</span><br><span class="line">                 modules: <span class="literal">true</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">              loader: <span class="string">&quot;postcss-loader&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">      ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="这里是提取css的loader配置"><a href="#这里是提取css的loader配置" class="headerlink" title="这里是提取css的loader配置"></a>这里是提取css的loader配置</h4><p>webpack.config.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">    use: extractTextPlugin.extract(&#123;</span><br><span class="line">        fallback: <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">        use: [</span><br><span class="line">            &#123; <span class="attr">loader</span>: <span class="string">&#x27;css-loader&#x27;</span>, <span class="attr">options</span>: &#123; <span class="attr">importLoaders</span>: <span class="number">1</span> &#125; &#125;,</span><br><span class="line">            <span class="string">&#x27;postcss-loader&#x27;</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="5-在index-css中添加css样式"><a href="#5-在index-css中添加css样式" class="headerlink" title="5. 在index.css中添加css样式"></a>5. 在index.css中添加css样式</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#img</span>&#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(../images/img.png);</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">1px</span> <span class="number">1px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">25</span>);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>打包，运行可以看到新加的样式都加上了前缀。</p>
<h2 id="第14节：-CSS进阶：-消除未使用的CSS"><a href="#第14节：-CSS进阶：-消除未使用的CSS" class="headerlink" title="第14节： CSS进阶： 消除未使用的CSS"></a>第14节： CSS进阶： 消除未使用的CSS</h2><blockquote>
<p>引用别的库如BootStrap这样的框架，会带很多CSS，但项目中只用了一部分。<br> 随项目进展，CSS越来越多，开发时只考虑新增，造成CSS冗余</p>
</blockquote>
<p>这节学习 用webpack消除未使用的CSS。</p>
<h2 id="PurifyCSS"><a href="#PurifyCSS" class="headerlink" title="PurifyCSS"></a>PurifyCSS</h2><p>PurifyCSS可以大大减少CSS冗余，比如我们经常使用的BootStrap(140KB)就可以减少到只有35KB大小。这在实际开发当中是非常有用的。</p>
<h3 id="1-安装PurifyCSS-webpack-官网"><a href="#1-安装PurifyCSS-webpack-官网" class="headerlink" title="1. 安装PurifyCSS-webpack 官网"></a>1. 安装PurifyCSS-webpack <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/purifycss-webpack">官网</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D purifycss-webpack purify-css</span><br></pre></td></tr></table></figure>

<p>-D 是–save-dev的缩写</p>
<h3 id="2-引入glob"><a href="#2-引入glob" class="headerlink" title="2. 引入glob"></a>2. 引入glob</h3><p>node的glob模块可以根据配置的规则，获取对应的文件。</p>
<p>在webpack.config.js引入glob。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> glob = <span class="built_in">require</span>(<span class="string">&#x27;glob&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>引入purifycss-webpack</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> purifyCSSPlugin = <span class="built_in">require</span>(<span class="string">&#x27;purifycss-webpack&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="3-配置plugins"><a href="#3-配置plugins" class="headerlink" title="3.配置plugins"></a>3.配置plugins</h3><p>在webpack.config.js的plugins里增加配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">    <span class="comment">// new uglify()</span></span><br><span class="line">    <span class="keyword">new</span> htmlPlugin(&#123;</span><br><span class="line">        minify: &#123;</span><br><span class="line">            removeAttributeQuotes: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        hash: <span class="literal">true</span>,</span><br><span class="line">        template: <span class="string">&#x27;./src/index.html&#x27;</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> extractTextPlugin(<span class="string">&#x27;css/index.css&#x27;</span>),</span><br><span class="line">    <span class="keyword">new</span> purifyCSSPlugin(&#123;</span><br><span class="line">        paths: glob.sync(path.join(__dirname, <span class="string">&#x27;src/*.html&#x27;</span>))</span><br><span class="line">    &#125;)</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<p>这里的paths主要是寻找HTML模板，purifycss会根据这个配置遍历文件，查找哪些css被使用了。</p>
<p><strong>注意</strong>：使用这个插件必须配合extract-text-webpack-plugin插件。</p>
<h3 id="4-在index-css中添加一些没用的css"><a href="#4-在index-css中添加一些没用的css" class="headerlink" title="4.在index.css中添加一些没用的css"></a>4.在index.css中添加一些没用的css</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 多余的css */</span></span><br><span class="line"><span class="selector-class">.bu</span>&#123;</span><br><span class="line">    <span class="attribute">backface-visibility</span>: hidden;</span><br><span class="line">    <span class="attribute">background-color</span>: green;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#FFF</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.hefd</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>执行打包，查看dist中的index.css内容，会发现没有多余的css.</p>
<h3 id="css文件代码分割"><a href="#css文件代码分割" class="headerlink" title="css文件代码分割"></a>css文件代码分割</h3><p>把css单独打包到CSS文件中，webpack默认把css打包到js中。即css-in-js.<br><a target="_blank" rel="noopener" href="https://webpack.js.org/plugins/mini-css-extract-plugin/#root">MiniCssExtractPlugin</a></p>
<p>压缩打包出的css代码<a target="_blank" rel="noopener" href="https://github.com/NMFR/optimize-css-assets-webpack-plugin">optimize-css-assets-webpack-plugin</a></p>
<p>不能与</p>
<h2 id="总结-第14节"><a href="#总结-第14节" class="headerlink" title="总结-第14节"></a>总结-第14节</h2><p>工作中一定要用这个插件，决定你的代码质量，非常有用。</p>
<h2 id="第15节：-给webpack增加babel配置"><a href="#第15节：-给webpack增加babel配置" class="headerlink" title="第15节： 给webpack增加babel配置"></a>第15节： 给webpack增加babel配置</h2><p>虽然webpack4增加了ES6的语法支持，但实际效果并不好。<br>所以还是要加babel-loader配置。</p>
<p>这节学习如何增加Babel配置。</p>
<h2 id="babel是什么-官网"><a href="#babel是什么-官网" class="headerlink" title="babel是什么 官网"></a>babel是什么 <a target="_blank" rel="noopener" href="https://babeljs.io/">官网</a></h2><p>Babel 是一个 JavaScript 编译器。用他可以</p>
<blockquote>
<p>使用下一代的javaScript代码(ES6,ES7….)，即使这些标准目前并未被当前的浏览器完全支持。<br> 使用基于JavaScript进行了扩展的语言，比如React的JSX。</p>
</blockquote>
<p>高级: 了解babel怎么把高级语法转换成浏览器能识别的代码</p>
<h3 id="1-Babel安装"><a href="#1-Babel安装" class="headerlink" title="1. Babel安装"></a>1. Babel安装</h3><p>先一次性安装所有依赖包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev babel-loader @babel/core @babel/preset-env</span><br><span class="line"><span class="comment"># 避免polyfill 污染全局变量，会以闭包形式引入</span></span><br><span class="line">npm install -D @babel/plugin-transform-runtime</span><br></pre></td></tr></table></figure>

<p>这些包分别是：核心包 babel-loader 8.x | babel 7.x</p>
<h3 id="2-在webpack中配置Babel"><a href="#2-在webpack中配置Babel" class="headerlink" title="2.在webpack中配置Babel"></a>2.在webpack中配置Babel</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.(jsx|js)$/</span>,</span><br><span class="line">    use: &#123;</span><br><span class="line">        loader: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">            presets: [</span><br><span class="line">               <span class="string">&#x27;@babel/preset-env&#x27;</span>,</span><br><span class="line">            <span class="comment">//    用到哪个，加哪个polyfill</span></span><br><span class="line">                [<span class="string">&#x27;@babel/preset-env&#x27;</span>, &#123;</span><br><span class="line">                    useBuiltIns: <span class="string">&#x27;usage&#x27;</span></span><br><span class="line">                &#125;]</span><br><span class="line">            ],</span><br><span class="line">            <span class="comment">// 代码只是业务代码不用引入，如果是类库的代码，需要引入</span></span><br><span class="line">            plugins: [<span class="string">&#x27;@babel/plugin-transform-runtime&#x27;</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    exclude: <span class="regexp">/node_modules/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>presets: 渲染器</p>
<p>不能转换所有的js，去除掉node_modules，</p>
<h3 id="3-在entry-js中修改代码"><a href="#3-在entry-js中修改代码" class="headerlink" title="3.在entry.js中修改代码"></a>3.在entry.js中修改代码</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> css <span class="keyword">from</span> <span class="string">&#x27;./css/index.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> less <span class="keyword">from</span> <span class="string">&#x27;./css/black.less&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> sass <span class="keyword">from</span> <span class="string">&#x27;./css/nav.scss&#x27;</span>;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> str = <span class="string">&#x27;Hello Webpack&#x27;</span></span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">&#x27;title&#x27;</span>).innerHTML = str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>现在打包可以看到let被转为var,做了兼容处理。<br>如果不适用babel转换的话，不会处理。</p>
<h3 id="babelrc配置"><a href="#babelrc配置" class="headerlink" title=".babelrc配置"></a>.babelrc配置</h3><p>babel的配置通常单独写在.babelrc文件里</p>
<p>在项目根目录新建.babelrc文件，把配置写到文件里。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;presets&quot;</span>: [</span><br><span class="line">    [<span class="string">&quot;@babel/preset-env&quot;</span>, &#123;</span><br><span class="line">      <span class="attr">&quot;loose&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">&quot;targets&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;node&quot;</span>: <span class="string">&quot;6.9&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">&quot;@babel/preset-react&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>修改webpack.config.js的loader配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.(jsx|js)$/</span>,</span><br><span class="line">    use: &#123;</span><br><span class="line">       loader: <span class="string">&#x27;babel-loader&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    exclude: <span class="regexp">/node_modules/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ENV-官网"><a href="#ENV-官网" class="headerlink" title="ENV 官网"></a>ENV <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/babel-preset-env">官网</a></h2><blockquote>
<p>babel-preset-env 是一个新的 preset，可以根据配置的目标运行环境（environment）自动启用需要的 babel 插件。<br>目前我们写 javascript 代码时，需要使用 N 个 preset，比如：babel-preset-es2015、babel-preset-es2016。es2015 可以把 ES6 代码编译为 ES5，es2016 可以把 ES2016 代码编译为 ES6。babel-preset-latest 可以编译 stage 4 进度的 ECMAScript 代码。</p>
<p>问题是我们几乎每个项目中都使用了非常多的 preset，包括不必要的。例如很多浏览器支持 ES6 的 generator，如果我们使用 babel-preset-es2015 的话，generator 函数就会被编译成 ES5 代码。</p>
<p>babel-preset-env 的工作方式类似 babel-preset-latest，唯一不同的就是 babel-preset-env 会根据配置的 env 只编译那些还不支持的特性。</p>
</blockquote>
<h3 id="安装babel"><a href="#安装babel" class="headerlink" title="安装babel"></a>安装babel</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev babel-preset-env</span><br></pre></td></tr></table></figure>

<p>修改.babelrc里的配置文件，只要把es2015换成env就可以了。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;presets&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;react&quot;</span>, <span class="string">&quot;env&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="总结-第15节"><a href="#总结-第15节" class="headerlink" title="总结-第15节"></a>总结-第15节</h2><p>这里学了怎么配置babel支持，并且动态支持最新配置。</p>
<h2 id="第16节：-打包后如何调试"><a href="#第16节：-打包后如何调试" class="headerlink" title="第16节： 打包后如何调试"></a>第16节： 打包后如何调试</h2><p>webpack打包后，代码无法调试。怎么解决？</p>
<h3 id="webpack支持生成sourceMap来方便调试"><a href="#webpack支持生成sourceMap来方便调试" class="headerlink" title="webpack支持生成sourceMap来方便调试"></a>webpack支持生成sourceMap来方便调试</h3><p>使用webpack通过简单的devtool配置，webpack会自动生成source map文件，map文件是一种对应编译文件和源文件的方法，方便调试。</p>
<h2 id="四种选项"><a href="#四种选项" class="headerlink" title="四种选项"></a>四种选项</h2><p>在配置devtool时，webpack提供了4种选项</p>
<h3 id="source-map"><a href="#source-map" class="headerlink" title="source-map"></a>source-map</h3><p>在一个单独的文件中生成一个完整且功能完全的文件。这个文件有最好的source map，但是它会减慢打包速度</p>
<p>出错信息–包括行，列 独立(每个文件对应一个map)</p>
<h3 id="cheap-module-source-map"><a href="#cheap-module-source-map" class="headerlink" title="cheap-module-source-map"></a>cheap-module-source-map</h3><p>在一个单独的文件中产生一个不带映射列的map，不带映射列提高了打包速度，但也使得浏览器开发者工具只能对应到具体的行，不能对应到具体的列(符号)，会对调试造成不便。</p>
<p>出错信息–只有行，没有列 独立</p>
<h3 id="eval-source-map"><a href="#eval-source-map" class="headerlink" title="eval-source-map"></a>eval-source-map</h3><p>使用eval打包源文件模块，在同一个文件中生产干净的完整版sourcemap，但对打包后输出的JS文件的执行具有性能和安全的隐患。在开发阶段可以使用，生产阶段一定不要开启这个选项</p>
<p>出错信息– 行 列 不独立</p>
<h3 id="cheap-module-eval-source-map"><a href="#cheap-module-eval-source-map" class="headerlink" title="cheap-module-eval-source-map"></a>cheap-module-eval-source-map</h3><p>这是在打包文件时最快生成sourcemap的方法，生成的sourcemap会和打包后的JavaScript同行显示，没有映射列，和eval-source-map有相似的缺点</p>
<p>出错信息– 列</p>
<h4 id="四种打包模式，由上到下越来越快。快的同时，也意味着对代码调试的困难越大"><a href="#四种打包模式，由上到下越来越快。快的同时，也意味着对代码调试的困难越大" class="headerlink" title="四种打包模式，由上到下越来越快。快的同时，也意味着对代码调试的困难越大"></a>四种打包模式，由上到下越来越快。快的同时，也意味着对代码调试的困难越大</h4><p>建议：</p>
<p>如果大型项目可以使用source-map,中小型项目使用eval-source-map就可以完全应对。</p>
<p>强调：source-map只适用于开发阶段，上线一定要修改这些配置。</p>
<h3 id="推荐线上用的cheap-module-source-map-方便线上出问题找原因"><a href="#推荐线上用的cheap-module-source-map-方便线上出问题找原因" class="headerlink" title="推荐线上用的cheap-module-source-map, 方便线上出问题找原因"></a>推荐线上用的cheap-module-source-map, 方便线上出问题找原因</h3><p>带module的为把module的代码也打入代码中<br>带inline的，会把打包的代码放到代码中<br>cheap,只考虑业务代码，不考虑module里的代码</p>
<h2 id="配置webpack-config-js的devtool"><a href="#配置webpack-config-js的devtool" class="headerlink" title="配置webpack.config.js的devtool"></a>配置webpack.config.js的devtool</h2><p>可以根据不同情况修改对应的值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">output: &#123;</span><br><span class="line">    <span class="comment">// 输出的路径</span></span><br><span class="line">    path: path.resolve(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">    <span class="comment">// 输出文件的名称</span></span><br><span class="line">    filename: <span class="string">&#x27;[name].js&#x27;</span>,</span><br><span class="line">    publicPath: website.publicPath</span><br><span class="line">&#125;,</span><br><span class="line">devtool: <span class="string">&#x27;source-map&#x27;</span>,</span><br></pre></td></tr></table></figure>

<h2 id="总结-第16节"><a href="#总结-第16节" class="headerlink" title="总结-第16节"></a>总结-第16节</h2><p>这节学习了配置devtool，方便在开发环境调试代码。<br><a target="_blank" rel="noopener" href="http://www.cnblogs.com/hhhyaaon/p/5657469.html">一篇讲的不错的博客</a></p>
<p><a target="_blank" rel="noopener" href="http://webpack.github.io/docs/configuration.html#devtool">官网地址</a></p>
<h2 id="第17节：-实战技巧：-开发和生产并行配置"><a href="#第17节：-实战技巧：-开发和生产并行配置" class="headerlink" title="第17节： 实战技巧： 开发和生产并行配置"></a>第17节： 实战技巧： 开发和生产并行配置</h2><p>这节讲开发和生产不同环境的不同配置</p>
<h2 id="依赖不同"><a href="#依赖不同" class="headerlink" title="依赖不同"></a>依赖不同</h2><p>开发环境和生产环境的依赖是不同的</p>
<blockquote>
<p>开发依赖<br>    只在开发中用来帮助你进行开发，简化代码，或生成兼容设置的依赖包。在package.json中devDependencies中的包是开发使用的。在生产环境用不到。<br>生产依赖<br>    一些框架的核心代码，比如vue, element-ui, react,<br>    这些包在dependencies中</p>
</blockquote>
<h2 id="npm安装"><a href="#npm安装" class="headerlink" title="npm安装"></a>npm安装</h2><p>假如项目中使用jQuery库，一般有三种安装法。</p>
<h3 id="1"><a href="#1" class="headerlink" title="1"></a>1</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install jquery</span><br></pre></td></tr></table></figure>

<p>安装完成后，package.json中并没有这个包的依赖。如果别人协同开发，直接npm install，项目无法正常运行，不推荐。</p>
<h3 id="2"><a href="#2" class="headerlink" title="2"></a>2</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install jquery --save</span><br></pre></td></tr></table></figure>

<p>安装完成后，在package.json的dependencies中。是生产环境需要依赖的包。上线时需要依赖。</p>
<h3 id="3"><a href="#3" class="headerlink" title="3"></a>3</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install jquery --save-dev</span><br></pre></td></tr></table></figure>

<p>安装完成后，在package.json的devDevpendencies中,是开发环境依赖的包，上线不需要这些包的依赖。</p>
<h3 id="安装全部依赖包"><a href="#安装全部依赖包" class="headerlink" title="安装全部依赖包"></a>安装全部依赖包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure>

<p>会安装package.json中的所有包</p>
<h3 id="安装生产环境依赖包"><a href="#安装生产环境依赖包" class="headerlink" title="安装生产环境依赖包"></a>安装生产环境依赖包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --production</span><br></pre></td></tr></table></figure>

<h2 id="配置生产和开发并行"><a href="#配置生产和开发并行" class="headerlink" title="配置生产和开发并行"></a>配置生产和开发并行</h2><p>以前的配置中设置了一个变量website,用于静态资源找到正确路径。如果生产环境和测试环境不一样，需要来回切换，这时候可用下面的方法配置。</p>
<h3 id="修改package-json命令"><a href="#修改package-json命令" class="headerlink" title="修改package.json命令"></a>修改package.json命令</h3><p>添加dev何止，通过环境变量来区分。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;liveserver&quot;</span>: <span class="string">&quot;live-server ./ --port=9090&quot;</span>,</span><br><span class="line">    <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;set type=dev&amp;webpack&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build&quot;</span>: <span class="string">&quot;set type=build&amp;webpack&quot;</span>,</span><br><span class="line">    <span class="string">&quot;server&quot;</span>: <span class="string">&quot;webpack-dev-server --open&quot;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="修改webpack-config-js文件"><a href="#修改webpack-config-js文件" class="headerlink" title="修改webpack.config.js文件"></a>修改webpack.config.js文件</h3><p>利用node的语法读取type的值，然后根据type的值进行判断设置不同的变量。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">if</span>(process.env.type === <span class="string">&#x27;build&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> website = &#123;</span><br><span class="line">        publicPath: <span class="string">&#x27;http://localhost:8089/&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> website = &#123;</span><br><span class="line">        publicPath: <span class="string">&#x27;http://localhost:8089/&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果想看某个值，可以console.log打印出来</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(process.env.type)</span><br></pre></td></tr></table></figure>

<p>打印console.log( encodeURIComponent(process.env.type) );发现报错</p>
<p>mac下的package.json设置<br>mac电脑需要把set换成export，并且多加一个&amp;,具体代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;server&quot;</span>: <span class="string">&quot;webpack-dev-server --open&quot;</span>,</span><br><span class="line">    <span class="string">&quot;dev&quot;</span>:<span class="string">&quot;export type=dev&amp;&amp;webpack&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build&quot;</span>: <span class="string">&quot;export type=build&amp;&amp;webpack&quot;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="总结-第17节"><a href="#总结-第17节" class="headerlink" title="总结-第17节"></a>总结-第17节</h2><p>通过配置不同的参数来区分不同的环境，从而达到不同环境打包不同代码。</p>
<h2 id="第18节：-实战技巧：-webpack模块化配置"><a href="#第18节：-实战技巧：-webpack模块化配置" class="headerlink" title="第18节： 实战技巧： webpack模块化配置"></a>第18节： 实战技巧： webpack模块化配置</h2><p>所有配置文件都放在webpack.config.js中会显得代码冗余，不利于维护。</p>
<p>如何进行模块化？</p>
<p>可以把生产环境的写到一个模块中，开发环境、测试环境都分开放到一个文件中。</p>
<p>这节学习如何将webpack.config.js模块化</p>
<h2 id="js的模块化实现"><a href="#js的模块化实现" class="headerlink" title="js的模块化实现"></a>js的模块化实现</h2><p>先看一下es6中的模块化代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">alertMsg</span> (<span class="params">msg</span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">&#x27;info: &#x27;</span> + msg);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = alertMsg;</span><br></pre></td></tr></table></figure>

<p>声明一个alertMsg方法，并把这个方法用module.exports暴露出去。</p>
<p>然后在其他文件中用import引入，并使用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> alertMsg <span class="keyword">from</span> <span class="string">&#x27;./utils.js&#x27;</span></span><br><span class="line">alertMsg();</span><br></pre></td></tr></table></figure>

<p>了解了JavaScript的模块化后，来写webpack的模块化</p>
<h2 id="webpack模块化"><a href="#webpack模块化" class="headerlink" title="webpack模块化"></a>webpack模块化</h2><p>这里用webpack.config.js中的entry入口哦文件进行模块化设置，单独做成一个模块</p>
<h3 id="1-在根目录建一个webpackConfig文件夹，新建entry-webpack-js，如下"><a href="#1-在根目录建一个webpackConfig文件夹，新建entry-webpack-js，如下" class="headerlink" title="1. 在根目录建一个webpackConfig文件夹，新建entry_webpack.js，如下"></a>1. 在根目录建一个webpackConfig文件夹，新建entry_webpack.js，如下</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明entry 变量</span></span><br><span class="line"><span class="keyword">const</span> entry = &#123;&#125;;</span><br><span class="line"><span class="comment">// 声明路径属性</span></span><br><span class="line">entry.path = &#123;</span><br><span class="line">    entry: <span class="string">&#x27;./src/entry.js&#x27;</span>,</span><br><span class="line">    entry2: <span class="string">&#x27;./src/entry2.js&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这里还可以写其他的</span></span><br><span class="line"><span class="comment">// entry.env.type之类的</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//模块化导出</span></span><br><span class="line"><span class="built_in">module</span>.exports = entry;</span><br></pre></td></tr></table></figure>

<h3 id="2-在webpack-config-js中引入，这里只能用require引入"><a href="#2-在webpack-config-js中引入，这里只能用require引入" class="headerlink" title="2. 在webpack.config.js中引入，这里只能用require引入"></a>2. 在webpack.config.js中引入，这里只能用require引入</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> entry = <span class="built_in">require</span>(<span class="string">&#x27;./webpackConfig/entry_webpack.js&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>在入口处修改如下代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">entry: entry.path,</span><br></pre></td></tr></table></figure>

<p>这时可以运行npm run dev进行测试，会发现正常运行</p>
<h2 id="总结-第18节"><a href="#总结-第18节" class="headerlink" title="总结-第18节"></a>总结-第18节</h2><p>模块化是必不可少的操作，一定要动手练习。</p>
<h2 id="第19节：-实战技巧：-优雅打包第三方类库-shimming"><a href="#第19节：-实战技巧：-优雅打包第三方类库-shimming" class="headerlink" title="第19节： 实战技巧： 优雅打包第三方类库-shimming"></a>第19节： 实战技巧： 优雅打包第三方类库-shimming</h2><p>有时候避免不了打包第三方类库，这时候该怎么操作。</p>
<p>这节学习如何优雅正确的用webpack引入第三方库。讲两种方法</p>
<h2 id="引入jQuery"><a href="#引入jQuery" class="headerlink" title="引入jQuery"></a>引入jQuery</h2><h3 id="第一种"><a href="#第一种" class="headerlink" title="第一种"></a>第一种</h3><h3 id="安装jquery"><a href="#安装jquery" class="headerlink" title="安装jquery"></a>安装jquery</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save jquery</span><br></pre></td></tr></table></figure>

<p>juqery要在生产环境和开发环境用，所以要用–save安装</p>
<h3 id="修改entry-js文件"><a href="#修改entry-js文件" class="headerlink" title="修改entry.js文件"></a>修改entry.js文件</h3><p>安装好需要引入到entry.js中，这里直接用import引入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">&#x27;jquery&#x27;</span></span><br></pre></td></tr></table></figure>

<p>这里不需要写相对路径，因为jquery的包是在node_modules里，只要写一个包名，系统就会自动为我们查找。</p>
<p>引入jQuery后就可以在文件中，使用jQuery，修改代码，测试</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;#gogo&#x27;</span>).animate(&#123;<span class="attr">height</span> : <span class="string">&quot;150&quot;</span> &#125; , <span class="number">1000</span> )</span><br><span class="line">    .animate(&#123;<span class="attr">width</span> : <span class="string">&quot;300&quot;</span> &#125; , <span class="number">1000</span> )</span><br><span class="line">    .hide(<span class="number">2000</span>)</span><br><span class="line">    .animate(&#123;<span class="attr">height</span> : <span class="string">&quot;show&quot;</span> , <span class="attr">width</span> : <span class="string">&quot;show&quot;</span> , <span class="attr">opacity</span> : <span class="string">&quot;show&quot;</span> &#125; , <span class="number">1000</span> )</span><br><span class="line">    .animate(&#123;<span class="attr">height</span> : <span class="string">&quot;500&quot;</span>&#125; , <span class="number">1000</span> );</span><br></pre></td></tr></table></figure>

<p>代码顺利运行，可以看到jQuery库引用成功。</p>
<p>注意：不仅可以在入口处引入，还可以在任何需要的js中引入。<br>webpack不会重复打包，他只打包一次。</p>
<h3 id="第二种"><a href="#第二种" class="headerlink" title="第二种"></a>第二种</h3><h3 id="用plugin引入"><a href="#用plugin引入" class="headerlink" title="用plugin引入"></a>用plugin引入</h3><p>上面的方法，只是普通的引入，webpack只负责打包，没有全局感。</p>
<p>这个方法在webpack.config.js中配置，不需要在入库文件中引入，而是webpack自动作全局引入。</p>
<p>这个插件是<strong>ProvicePlugin</strong> <a target="_blank" rel="noopener" href="http://webpack.github.io/docs/shimming-modules.html#plugin-provideplugin">文档</a></p>
<p>ProvicePlugin是webpack自带的插件，要现在webpack.config.js中引入webpack。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>在plugins中配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> webpack.ProvidePlugin(&#123;</span><br><span class="line">    $: <span class="string">&#x27;jQuery&#x27;</span>,</span><br><span class="line">    _: <span class="string">&#x27;lodash&#x27;</span>,</span><br><span class="line">    _join: [<span class="string">&#x27;lodash&#x27;</span>, <span class="string">&#x27;join&#x27;</span>]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>配置好后，就可以在其他文件直接使用$, 而不用在每个组件引入jQuery。</p>
<p>这种全局的引入，在实际工作中也可以很好的规范项目所使用的第三方库。</p>
<h2 id="总结-第19节"><a href="#总结-第19节" class="headerlink" title="总结-第19节"></a>总结-第19节</h2><p>每个项目都可能引入第三方类库。像一些成熟的框架都有自己的webpack框架，如vue-cli。</p>
<p>很多情况下，我们还是要手动更改这些配置好的webpack来适用于我们自己的项目。</p>
<p>所以这节课的内容也非常重要。</p>
<h2 id="第20节：-实战技巧：-watch的正确使用方法"><a href="#第20节：-实战技巧：-watch的正确使用方法" class="headerlink" title="第20节： 实战技巧： watch的正确使用方法"></a>第20节： 实战技巧： watch的正确使用方法</h2><p>在初级开发阶段，使用webpack-dev-server可以充当服务器和完成打包任务，但随着项目的进一步完善，可能需要前后联调或两个前端合并代码时，就需要一个公共的服务器。这时候，每次手动打包显然效率太低，我们希望的场景是代码发生变化后，只要保存，webpack就自动为我们进行打包。</p>
<p>这个工具就是watch。</p>
<p>这节课学完后，会发现在开发中更加得心应手了。</p>
<h2 id="watch设置"><a href="#watch设置" class="headerlink" title="watch设置"></a>watch设置</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">watchOptions: &#123;</span><br><span class="line">    <span class="comment">// 检测修改的时间，以毫秒为单位</span></span><br><span class="line">    poll: <span class="number">100</span>,</span><br><span class="line">    <span class="comment">// 防止重复保存而发生编译错误。这里设置的500是半秒内重复保存，不进行打包</span></span><br><span class="line">    aggregeateTimeout: <span class="number">500</span>,</span><br><span class="line">    <span class="comment">// 不监听的目录</span></span><br><span class="line">    ignored: <span class="regexp">/node_modules/</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>注意ignored这里不能用双引号</p>
<p>没有配置的情况下，直接webpack –watch   (-w) 是不起作用的</p>
<p>配置好后，就可以痛快的使用watch了。大大加快了开发效率，不用反复手动打包。</p>
<h2 id="BannerPlugin插件"><a href="#BannerPlugin插件" class="headerlink" title="BannerPlugin插件"></a>BannerPlugin插件</h2><p>工作中每个人的代码都要写备注，方便发生问题时，可以找到写代码的人，有时候也用于版权声明。</p>
<p>这个插件就是BannerPlugin,使用后会在js中加上我们的版权或开发者声明</p>
<p>在webpack.config.js的plugins里配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> webpack.BannerPlugin(<span class="string">&#x27;版权所有，仅限学习使用~~&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>注意： 用这个插件，需要提前引入webpack.<br>编译后，在每个文件的头部，会有编译信息。</p>
<h2 id="第21节：-实战技巧：-webpack优化黑技能"><a href="#第21节：-实战技巧：-webpack优化黑技能" class="headerlink" title="第21节： 实战技巧： webpack优化黑技能"></a>第21节： 实战技巧： webpack优化黑技能</h2><p>无论写什么程序，都要有颗不断优化的心。</p>
<p>这节课来学习工作中常用的webpack优化黑技能。</p>
<h2 id="ProvidePlugin和import"><a href="#ProvidePlugin和import" class="headerlink" title="ProvidePlugin和import"></a>ProvidePlugin和import</h2><p>在第19节中学习了如何引入第三方类库，并引入了jQuery。在引入jQuery时，用了2种方法。第一种是import，第二种是用ProvidePlugin插件。这两种方法有什么区别呢？</p>
<blockquote>
<p>import方法： 引用后不管在代码中用不用，都会把这个类库打包，这样有时会产生代码冗余。<br> ProvideP方法： 引用后只有在类库使用时，才按需打包，所以建议工作中使用插件的方式进行引入。</p>
</blockquote>
<p>具体打包差别可以自行练习，查看打包结果。差距明显。</p>
<h2 id="抽离jQuery"><a href="#抽离jQuery" class="headerlink" title="抽离jQuery"></a>抽离jQuery</h2><p>上面只是优化的第一步，工作中会发现，不使用的类库我们也不会引入，所以上面只是必要操作的一步。往往把第三类类库抽离出来，才是最好的解决办法。</p>
<h3 id="第一步：-修改入口文件"><a href="#第一步：-修改入口文件" class="headerlink" title="第一步： 修改入口文件"></a>第一步： 修改入口文件</h3><p>抽离的第一步是修改入口文件，把jQuery加入到入口文件中，看下面代码。<br>webpack.config.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">entry.path = &#123;</span><br><span class="line">    entry: <span class="string">&#x27;./src/entry.js&#x27;</span>,</span><br><span class="line">    jquery: <span class="string">&#x27;jquery&#x27;</span>,</span><br><span class="line">    entry2: <span class="string">&#x27;./src/entry2.js&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="第二步：引入插件"><a href="#第二步：引入插件" class="headerlink" title="第二步：引入插件"></a>第二步：引入插件</h3><p>需要引入optimize优化插件，插件里是需要配置的，具体代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">    <span class="comment">// name对应入口文件中的名字，这里是jquery</span></span><br><span class="line">    name: <span class="string">&#x27;jquery&#x27;</span>,</span><br><span class="line">    <span class="comment">// 把文件打包到哪里，路径地址</span></span><br><span class="line">    filename: <span class="string">&#x27;assets/js/jquery.min.js&#x27;</span>,</span><br><span class="line">    <span class="comment">// 最小打包的文件模块数，这里直接写2</span></span><br><span class="line">    minChunks: <span class="number">2</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>minChunks是固定配置，不写不行，会打包失败</li>
<li>filename可以省略，直接打包到根目录下，这里直接打包到dist目录下</li>
</ul>
<p>配置完成后可以先删掉原来的dist目录，再用webpack打包，会发现jQuery被抽离了出来，并且entry.js变的很小。</p>
<h2 id="多个第三方库抽离"><a href="#多个第三方库抽离" class="headerlink" title="多个第三方库抽离"></a>多个第三方库抽离</h2><p>会了jquery抽离，在实际开发中，会引用不止一个第三方类库，也需要抽离。</p>
<p>这里用引入Vue举例，看看如何抽离出来。</p>
<h3 id="第一步：-先用npm进行安装"><a href="#第一步：-先用npm进行安装" class="headerlink" title="第一步： 先用npm进行安装"></a>第一步： 先用npm进行安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue --save</span><br></pre></td></tr></table></figure>

<p>注意这里是–save，不是–save-dev，因为生产环境也要用到</p>
<h3 id="第二步：-在入口配置中引入Vue和jquery"><a href="#第二步：-在入口配置中引入Vue和jquery" class="headerlink" title="第二步： 在入口配置中引入Vue和jquery"></a>第二步： 在入口配置中引入Vue和jquery</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">entry.path = &#123;</span><br><span class="line">    entry: <span class="string">&#x27;./src/entry.js&#x27;</span>,</span><br><span class="line">    jquery: <span class="string">&#x27;jquery&#x27;</span>,</span><br><span class="line">    vue: <span class="string">&#x27;vue&#x27;</span>,</span><br><span class="line">    entry2: <span class="string">&#x27;./src/entry2.js&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>只比上边多了个vue</p>
<h3 id="第三步：修改CommonsChunkPlugin配置"><a href="#第三步：修改CommonsChunkPlugin配置" class="headerlink" title="第三步：修改CommonsChunkPlugin配置"></a>第三步：修改CommonsChunkPlugin配置</h3><p>需要修改两个位置：</p>
<ul>
<li>在name属性里把原来的字符串改为数组。因为要引用多个模块， 所以是数组。</li>
<li>在filename属性中把输出的文件名改为匹配符[name],这项操作就是打包出来的名字跟随我们打包前的模块名。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">    <span class="comment">// name对应入口文件中的名字，这里是jquery</span></span><br><span class="line">    name: [<span class="string">&#x27;jquery&#x27;</span>, <span class="string">&#x27;vue&#x27;</span>],</span><br><span class="line">    <span class="comment">// 把文件打包到哪里，路径地址</span></span><br><span class="line">    filename: <span class="string">&#x27;assets/js/[name].js&#x27;</span>,</span><br><span class="line">    <span class="comment">// 最小打包的文件模块数，这里直接写2</span></span><br><span class="line">    minChunks: <span class="number">2</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>配置好后，在控制台用npm run build 打包。jquery和Vue被抽离出来了。</p>
<h2 id="总结-第21节"><a href="#总结-第21节" class="headerlink" title="总结-第21节"></a>总结-第21节</h2><p>在项目开发中，会使用很多第三方类库，比较好的做法就是把这些第三方类库全部抽离处理，这样在项目维护和性能上都是不错的选择。学了这个技巧后，在工作中要会使用。</p>
<p>jquery作为插件引入后，在其他文件中怎么用呢<br>还是需要有 providePlugin来支撑的，不能去掉。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> webpack.ProvidePlugin(&#123;</span><br><span class="line">    $: <span class="string">&#x27;jquery&#x27;</span></span><br><span class="line">&#125;),</span><br></pre></td></tr></table></figure>

<h2 id="第22节：-实战技巧：-静态资源集中输出"><a href="#第22节：-实战技巧：-静态资源集中输出" class="headerlink" title="第22节： 实战技巧： 静态资源集中输出"></a>第22节： 实战技巧： 静态资源集中输出</h2><p>工作中会有一些已经存在但在项目中没有引用的图片资源或者其他静态资源（比如设计图、开发文档），这些静态资源有可能是文档，也有可能是一些额外的图片。项目组长会要求你打包时保留这些静态资源，直接打包到指定文件夹。其实打包这些资源只需要用到copy-webpack-plugin。</p>
<h2 id="使用copy-webpack-plugin"><a href="#使用copy-webpack-plugin" class="headerlink" title="使用copy-webpack-plugin"></a>使用copy-webpack-plugin</h2><p>copy-webpack-plugin就是专门为我们做静态资源转移的插件，不过它需要安装。</p>
<h3 id="插件安装"><a href="#插件安装" class="headerlink" title="插件安装"></a>插件安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev copy-webpack-plugin</span><br></pre></td></tr></table></figure>

<h3 id="引入插件"><a href="#引入插件" class="headerlink" title="引入插件"></a>引入插件</h3><p>安装好后，需要在webpack.config.js的头部引入这个插件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> copyWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;copy-webpack-plugin&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="配置插件"><a href="#配置插件" class="headerlink" title="配置插件"></a>配置插件</h3><p>在plugins里进行配置,注意这里是数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> copyWebpackPlugin([&#123;</span><br><span class="line">    <span class="keyword">from</span>: __dirname+ <span class="string">&#x27;/src/public&#x27;</span>,</span><br><span class="line">    to: <span class="string">&#x27;./public&#x27;</span></span><br><span class="line">&#125;])</span><br></pre></td></tr></table></figure>

<ul>
<li>from: 要打包的静态资源目录地址，__dirname指项目目录，可以直接定位到本机的项目目录。</li>
<li>to: 要打包到的文件路径，跟随output配置的目录。所以这里不用加__dirname.</li>
</ul>
<p>配置好后，运行webpack，会发现图片按照配置打包到了指定目录。</p>
<h2 id="总结-第22节"><a href="#总结-第22节" class="headerlink" title="总结-第22节"></a>总结-第22节</h2><p>现在学起来已经很容易了，已经掌握了webpack的基本知识，剩下的就是不断练习和在实际项目中发现新的需求，然后找到新的loader或者plugin来解决问题。</p>
<h2 id="第23节：-实战技巧：-JSON配置文件的使用"><a href="#第23节：-实战技巧：-JSON配置文件的使用" class="headerlink" title="第23节： 实战技巧： JSON配置文件的使用"></a>第23节： 实战技巧： JSON配置文件的使用</h2><p>在实际工作中，我们的项目都会配置一个json的文件或API文件，作为项目的配置文件。有时也会从后台读取一个json文件。</p>
<p>这节课就学习如何在webpack环境中使用JSON.</p>
<p>在webpack1或webpack2中，需要加载一个json-loader的loader，但在webpack4.x中，不需要额外引入。</p>
<h2 id="读取JSON内容"><a href="#读取JSON内容" class="headerlink" title="读取JSON内容"></a>读取JSON内容</h2><ol>
<li><p>在index.html中加个div，并给个id.</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;jsonArea&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>到src文件夹下，找到入口文件，entry.js,修改代码。如下：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> json = <span class="built_in">require</span>(<span class="string">&#x27;../config.json&#x27;</span>);</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&#x27;jsonArea&#x27;</span>).innerHTML = json.name;</span><br></pre></td></tr></table></figure>

<p> 引入json文件，并插入到dom中。</p>
</li>
<li><p>运行npm run server ，就可以看到效果。</p>
</li>
</ol>
<h2 id="说说热更新"><a href="#说说热更新" class="headerlink" title="说说热更新"></a>说说热更新</h2><p>在devServer中配置<code>hot: true</code><br><code>hotOnly: true</code> 热更新失败时，不刷新整个页面</p>
<p>在webpack4.x中，启用热加载很容易，只要加入HotModuleReplacementPlugin这个插件就可以了。</p>
<p>在plugin里配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">    <span class="keyword">new</span> webpack.HotModuleReplacementPlugin()</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>现在，启动npm run server后，修改index.html中的内容，浏览器就可以自动更新最新页面</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果某个js模块更新了，只更新某个模块，而不是所有模块都更新</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">module</span>.hot) &#123;</span><br><span class="line">    <span class="built_in">module</span>.hot.accept(<span class="string">&#x27;./number&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        number();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="这里的热更新和平时写程序的热加载不是一回事，比如说我们Vue和React中的热更新，并不是刷新整个页面，而是一个局部的更新，而这里的更新是刷新了整个页面"><a href="#这里的热更新和平时写程序的热加载不是一回事，比如说我们Vue和React中的热更新，并不是刷新整个页面，而是一个局部的更新，而这里的更新是刷新了整个页面" class="headerlink" title="这里的热更新和平时写程序的热加载不是一回事，比如说我们Vue和React中的热更新，并不是刷新整个页面，而是一个局部的更新，而这里的更新是刷新了整个页面"></a>这里的热更新和平时写程序的热加载不是一回事，比如说我们Vue和React中的热更新，并不是刷新整个页面，而是一个局部的更新，而这里的更新是刷新了整个页面</h3><p>这个区别要搞清楚。</p>
<h2 id="第24节：-剧终：-webpack自学技巧传授"><a href="#第24节：-剧终：-webpack自学技巧传授" class="headerlink" title="第24节： 剧终： webpack自学技巧传授"></a>第24节： 剧终： webpack自学技巧传授</h2><p>这节课学一些自学webpack的技巧，让大家可以在本教程结束后继续自行精进。</p>
<h2 id="学习推荐"><a href="#学习推荐" class="headerlink" title="学习推荐"></a>学习推荐</h2><ul>
<li><p><a target="_blank" rel="noopener" href="https://webpack.js.org/">webpack 官网</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://doc.webpack-china.org/">中文官网</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://webpack.wuhaolin.cn/">深入浅出 Webpack</a></p>
</li>
</ul>
<h2 id="Webpack插件"><a href="#Webpack插件" class="headerlink" title="Webpack插件"></a>Webpack插件</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/hard-source-webpack-plugin">hard-source-webpack-plugin</a><br>提升打包效率非常明显</li>
</ul>
<h2 id="webpack之监测配置文件的修改而自动构建"><a href="#webpack之监测配置文件的修改而自动构建" class="headerlink" title="webpack之监测配置文件的修改而自动构建"></a>webpack之监测配置文件的修改而自动构建</h2><p>在webpack的自动构建中，一般情况下我们只是监测到源文件的变化，如果修改webpack的配置文件就不会发生自动构建。通过使用node的nodemon模块来达到目的。</p>
<p>一、安装nodemon</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全局安装</span></span><br><span class="line">npm install -g nodemon</span><br><span class="line"><span class="comment">// 本地安装</span></span><br><span class="line">npm install --save-dev nodemon</span><br></pre></td></tr></table></figure>

<p>二、使用nodemon</p>
<p><code>nodemon --watch ./config/webpack.dev.js</code></p>
<p>解释：</p>
<p>– watch config 表示监测config目录下的文件变化<br>– dev.js则为webpack本来的通过 node dev.js形式执行的构建起始文件<br>总体意思就是：监测config中的文件变化并重新执行dev.js文件</p>
<p>如果nodemon是本地安装需要如下处理：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在package.json中scripts中加如下配置</span></span><br><span class="line"><span class="string">&quot;startNodemon&quot;</span>:<span class="string">&quot;nodemon --watch config dev.js&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//在命令行中执行</span></span><br><span class="line">npm run startNodemon</span><br></pre></td></tr></table></figure>

<p>在package.json中的配置</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;start&quot;</span>: <span class="string">&quot;webpack ...&quot;</span></span><br><span class="line">        <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;nodemon --watch config dev.js --exec npm run start&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>说明</p>
<ul>
<li>–exec 配置运行的命令</li>
<li>–watch 监听些文件变化，当变化的时候自动重启</li>
</ul>
<p>node服务器app.js自动重启</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;nodemon  app.js &quot;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>实际使用中，如果package.json中的main配置了，但是路径不对，会报错找不到文件导致无法自动重启</p>
<h2 id="webpack-npm-install-报错解决"><a href="#webpack-npm-install-报错解决" class="headerlink" title="webpack npm install 报错解决"></a>webpack npm install 报错解决</h2><p>执行<code>npm install</code> 报错: <code>npm ERR! Cannot read property &#39;match&#39; of undefined</code></p>
<p>解决办法:</p>
<p>依次执行以下命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rm -rf node_modules</span><br><span class="line">rm package-lock.json</span><br><span class="line">npm cache clear --force</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>

<h3 id="Clean-plugin-for-webpack"><a href="#Clean-plugin-for-webpack" class="headerlink" title="Clean plugin for webpack"></a><a target="_blank" rel="noopener" href="https://github.com/johnagan/clean-webpack-plugin">Clean plugin for webpack</a></h3><p>在打包之前清除打包文件</p>
<p><code>npm install --save-dev clean-webpack-plugin</code></p>
<p>用法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> webpackConfig = &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> CleanWebpackPlugin()</span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = webpackConfig;</span><br></pre></td></tr></table></figure>

<h3 id="自己实现webpack-dev-server"><a href="#自己实现webpack-dev-server" class="headerlink" title="自己实现webpack-dev-server"></a>自己实现webpack-dev-server</h3><p><a target="_blank" rel="noopener" href="https://webpack.js.org/api/node/">在node中使用webpack</a></p>
<p><code>npm install express webpack-dev-middleware -D</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> webpackDevMiddleware = <span class="built_in">require</span>(<span class="string">&#x27;webpack-dev-middleware&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> config = <span class="built_in">require</span>(<span class="string">&#x27;./webpack.config.js&#x27;</span>);</span><br><span class="line"><span class="comment">// 用webpack结合config编译代码</span></span><br><span class="line"><span class="keyword">const</span> complier = webpack(config);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line">app.use(webpackDevMiddleware(complier), &#123;</span><br><span class="line">    publicPath: config.output.publicPath</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;server is running&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>webpack.config.js 配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scripts: &#123;</span><br><span class="line">    <span class="string">&#x27;server&#x27;</span>: <span class="string">&#x27;node server.js&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="tree-shaking"><a href="#tree-shaking" class="headerlink" title="tree shaking"></a>tree shaking</h2><p>只支持ES Module!!!</p>
<p><code>import &#123; add &#125; from &#39;./math.js&#39;;</code></p>
<p>底层是静态引入方式</p>
<p>不支持</p>
<p><code>const add = require(&#39;./math.js);</code></p>
<p>commonJs 是动态引入, 不支持tree shaking</p>
<p>webpack.config.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">optimization: &#123;</span><br><span class="line">    usedExports: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在package.json中</p>
<p>对哪个文件不做筛选，在<code>sideEffects</code>里以数组的方式加入<br>对css文件不做处理<br><code>sideEffects: [&#39;*.css&#39;]</code></p>
<p><code>false</code>为对所有文件筛选</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;sideEffects&quot;</span>: <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>mode: 为development时，打包不会删除代码，会删除导出</p>
<h2 id="webpack区分-开发模式和-production模式"><a href="#webpack区分-开发模式和-production模式" class="headerlink" title="webpack区分 开发模式和 production模式"></a>webpack区分 开发模式和 production模式</h2><p>依赖webpack-merge</p>
<p><code>npm install webpack-merge -D</code></p>
<p>webpack.common.js 公共的配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">&#x27;webpack-merge&#x27;</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: &#123;</span><br><span class="line">        main: <span class="string">&#x27;./src/index.js&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    output: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>webpack.prod.js, 保留线上独有的配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">&#x27;webpack-merge&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> commConfig = <span class="built_in">require</span>(<span class="string">&#x27;./webpack.common.js&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> prodConfig = &#123;</span><br><span class="line">    mode: <span class="string">&#x27;production&#x27;</span>,</span><br><span class="line">    devtool: <span class="string">&#x27;cheap-module-source-map&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = merge(commonConfig, prodConfig);</span><br></pre></td></tr></table></figure>

<p>webpack.dev.js, 保留开发环境独有的配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">&#x27;webpack-merge&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> commConfig = <span class="built_in">require</span>(<span class="string">&#x27;./webpack.common.js&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> devConfig = &#123;</span><br><span class="line">    mode: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        hot: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = merge(commonConfig, devConfig);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>package.json</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scripts: &#123;</span><br><span class="line">    &quot;dev&quot;: &quot;webpack-dev-server --config webpack.dev.js&quot;,</span><br><span class="line">    &quot;build&quot;: &quot;webpack --config webpack.prod.js&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以把所有配置文件都放到<code>build</code>文件夹里, 需要改package.json里的配置(output, scripts等)</p>
<p>检查打包位置对不对，清除文件对不对</p>
<h2 id="Code-Splitting–有疑问"><a href="#Code-Splitting–有疑问" class="headerlink" title="Code Splitting–有疑问"></a>Code Splitting–有疑问</h2><p><a target="_blank" rel="noopener" href="https://webpack.js.org/plugins/split-chunks-plugin/#root">SplitChunksPlugin</a></p>
<p>拆分代码，提升项目性能</p>
<p>比如引入lodash之类的类库，打包生成的文件会多1MB左右</p>
<p>将2MB的文件拆分成两个1MB的文件加载</p>
<p>当业务逻辑发生改变时，只加载业务逻辑代码，不加载基础类库的代码</p>
<p>在webpack.config.js中增加配置—-同步代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">optimization: &#123;</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">        chunks: <span class="string">&#x27;all&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>异步代码（import,无需做任何配置会自动进行代码分割）</p>
<p>代码支持异步import</p>
<p><code>npm install babel-plugin-dynamic-import-webpack --save-dev</code></p>
<h2 id="Lazy-Loading-懒加载，Chunk-是什么–有疑问"><a href="#Lazy-Loading-懒加载，Chunk-是什么–有疑问" class="headerlink" title="Lazy Loading 懒加载，Chunk 是什么–有疑问"></a>Lazy Loading 懒加载，Chunk 是什么–有疑问</h2><p>通过import异步加载模块</p>
<p>可以让页面加载更快</p>
<p><code>babel-plugin-syntax-dynamic-import</code></p>
<p>点击页面才会加载getComponent</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getComponent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">import</span>(<span class="comment">/** webpackChunkName: &quot;lodash&quot; */</span> <span class="string">&#x27;lodash&#x27;</span>).then(&#123; <span class="attr">default</span>: _ &#125;) =&gt; &#123;</span><br><span class="line">        <span class="keyword">var</span> element = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">        element.innerHTML = _.join([<span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;22&#x27;</span>], <span class="string">&#x27;-&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> element;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    getComponent().then(<span class="function"><span class="params">element</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">document</span>.body.appendChild(element);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getComponent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">default</span>: _ &#125; = <span class="keyword">await</span> <span class="keyword">import</span>(<span class="comment">/** webpackChunkName: &quot;lodash&quot; */</span> <span class="string">&#x27;lodash&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> element = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">    element.innerHTML = _.join([<span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;22&#x27;</span>], <span class="string">&#x27;-&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> element;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="打包分析，Preloading-Prefetching"><a href="#打包分析，Preloading-Prefetching" class="headerlink" title="打包分析，Preloading, Prefetching"></a>打包分析，Preloading, Prefetching</h2><p><a target="_blank" rel="noopener" href="https://webpack.js.org/guides/code-splitting/#bundle-analysis">官方工具链接</a></p>
<p>webpack分析工具<a target="_blank" rel="noopener" href="https://github.com/webpack/analyse">analyse</a></p>
<p>生成打包描述文件<br>package.json</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scripts: &#123;</span><br><span class="line">    &quot;analyze&quot;: &#x27;webpack --profile --json &gt; stats.json&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="http://webpack.github.com/analyse">分析网站，需科学上网</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/webpack-contrib/webpack-bundle-analyzer">webpack-bundle-analyzer</a></p>
<h3 id="小知识-文件利用率"><a href="#小知识-文件利用率" class="headerlink" title="小知识-文件利用率"></a>小知识-文件利用率</h3><p>command+shift+p 搜索coverage, 可以看文件利用率</p>
<p>提高代码的使用率</p>
<p>多写异步代码，性能才能得到提升</p>
<p>chunks: ‘async’ 才能真正提升网站性能</p>
<h2 id="webpack与浏览器缓存-Caching"><a href="#webpack与浏览器缓存-Caching" class="headerlink" title="webpack与浏览器缓存(Caching)"></a>webpack与浏览器缓存(Caching)</h2><p><code>performace: false</code> 可以不提示性能问题</p>
<p>通过文件名添加hash值来缓存</p>
<p>生产环境</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">output: &#123;</span><br><span class="line">    filename: <span class="string">&#x27;[name].[contenthash].js&#x27;</span>,</span><br><span class="line">    chunkFilename: <span class="string">&#x27;[name].[contenthash].js&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="library打包"><a href="#library打包" class="headerlink" title="library打包"></a>library打包</h2><p><a target="_blank" rel="noopener" href="https://webpack.js.org/configuration/output/#outputlibrarytarget">文档地址</a></p>
<p><a target="_blank" rel="noopener" href="https://webpack.js.org/configuration/externals/#root">externals</a><br>开发类库的打包，供第三方以不同的方式(import, require, script)引入使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mode: <span class="string">&#x27;production&#x27;</span>,</span><br><span class="line"><span class="comment">// 如果遇到lodash库，不打包到代码里，业务里要用的话，先引用lodash，再引用library</span></span><br><span class="line">externals: [<span class="string">&#x27;lodash&#x27;</span>],</span><br><span class="line">output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">    filename: <span class="string">&#x27;library.js&#x27;</span></span><br><span class="line">    <span class="comment">// 以script方式引入</span></span><br><span class="line">    library: <span class="string">&#x27;library&#x27;</span>,</span><br><span class="line">    <span class="comment">// 以import和require方式引入</span></span><br><span class="line">    libraryTarget: <span class="string">&#x27;umd&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>package.json</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">main: &quot;./dist/index.js&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm adduser</span><br><span class="line">npm publish</span><br></pre></td></tr></table></figure>

<h2 id="PWA打包配置"><a href="#PWA打包配置" class="headerlink" title="PWA打包配置"></a>PWA打包配置</h2><p>网站访问过一次之后，可以一直被缓存, serviceWorker</p>
<p><a target="_blank" rel="noopener" href="https://developers.google.com/web/tools/workbox/modules/workbox-webpack-plugin">workbox-webpack-plugin</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Inside of webpack.config.js:</span></span><br><span class="line"><span class="keyword">const</span> &#123;GenerateSW&#125; = <span class="built_in">require</span>(<span class="string">&#x27;workbox-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// Other webpack config...</span></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="comment">// Other plugins...</span></span><br><span class="line">    <span class="keyword">new</span> GenerateSW(&#123;</span><br><span class="line">      option: <span class="string">&#x27;value&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="TypeScript-打包配置"><a href="#TypeScript-打包配置" class="headerlink" title="TypeScript 打包配置"></a>TypeScript 打包配置</h2><p><code>npm install ts-loader typescript -D</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rules: [&#123;</span><br><span class="line">    test: <span class="regexp">/\.tsx?$/</span>,</span><br><span class="line">    use: <span class="string">&#x27;ts-loader&#x27;</span>,</span><br><span class="line">    exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>

<p>tsconfig.json</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;outDir&quot;</span>: <span class="string">&quot;./dist&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;module&quot;</span>: <span class="string">&quot;es6&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;target&quot;</span>: <span class="string">&quot;es5&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;allowJs&quot;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>npm install @types/lodash --save-dev</code><br>这样在代码中typescript可以识别lodash中的方法，并提示语法不规范等错误</p>
<p><a target="_blank" rel="noopener" href="https://github.com/DefinitelyTyped/DefinitelyTyped">DefinitelyTyped</a></p>
<h2 id="webpack性能优化"><a href="#webpack性能优化" class="headerlink" title="webpack性能优化"></a>webpack性能优化</h2><ol>
<li><p>跟上技术的迭代(npm, yarn, Node版本升级)</p>
</li>
<li><p>在尽可能少的模块上用loader<br> excludes或include</p>
</li>
<li><p>plugin尽可能少，并保证可靠性</p>
</li>
<li><p>resolve参数合理配置</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">    extendsions: [<span class="string">&#x27;.js&#x27;</span>, <span class="string">&#x27;.jsx&#x27;</span>],</span><br><span class="line">    <span class="comment">// 从哪个文件导入模块, 不要配置过多的</span></span><br><span class="line">    mainFields: [<span class="string">&#x27;index&#x27;</span>, <span class="string">&#x27;main&#x27;</span>],</span><br><span class="line">    <span class="comment">// 创建 import 或 require 的别名</span></span><br><span class="line">    alias: &#123;</span><br><span class="line">        <span class="string">&#x27;utils&#x27;</span>: path.resolve(__dirname, <span class="string">&#x27;../utils&#x27;</span>),</span><br><span class="line">        <span class="string">&#x27;assets&#x27;</span>: path.resolve(__dirname, <span class="string">&#x27;../assets&#x27;</span>),</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> extendsions: 不要把所有后缀都加到这里, 如css, jpg等, 会增加文件查找复杂度</p>
</li>
<li><p>使用DLLPlugin提高打包速度</p>
<p> 每一次引入第三方包都会进行分析，消耗时间</p>
<p> webpack.dll.js</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: &#123;</span><br><span class="line">        vendors: [<span class="string">&#x27;react&#x27;</span>, <span class="string">&#x27;react-dom&#x27;</span>],</span><br><span class="line">        lodash: [<span class="string">&#x27;lodash&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: <span class="string">&#x27;[name].dll.js&#x27;</span>,</span><br><span class="line">        path: path.resolve(__dirname, <span class="string">&#x27;../dll&#x27;</span>),</span><br><span class="line">        <span class="comment">// 可以在控制台使用的变量,通过全局变量暴露出来</span></span><br><span class="line">        library: <span class="string">&#x27;[name]&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> webpack.dllPlugin(&#123;</span><br><span class="line">            name: <span class="string">&#x27;[name]&#x27;</span>,</span><br><span class="line">            path: path.resolve(__dirname, <span class="string">&#x27;../dll/[name].manifest.json&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> webpack.common.js</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> addAssetHtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;add-asset-html-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> plugins = [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        template: <span class="string">&#x27;src/index.html&#x27;</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> CleanWebpackPlugin([<span class="string">&#x27;dist&#x27;</span>], &#123;</span><br><span class="line">        root: path.resolve(__dirname, <span class="string">&#x27;../&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> files = fs.readdirSync(path.resolve(__dirname, <span class="string">&#x27;../dll&#x27;</span>));</span><br><span class="line">files.forEach(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="regexp">/.*\.dll.js/</span>.test(file)) &#123;</span><br><span class="line">        plugins.push(<span class="keyword">new</span> addAssetHtmlWebpackPlugin(&#123;</span><br><span class="line">            filePath: path.resolve(__dirname, <span class="string">&#x27;../dll&#x27;</span>,file)</span><br><span class="line">        &#125;))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="regexp">/.*\.manifest.json/</span>.test(file)) &#123;</span><br><span class="line">        plugins.push(<span class="keyword">new</span> webpack.DllReferencePlugin(&#123;</span><br><span class="line">            manifest: path.solve(__dirname, <span class="string">&#x27;../dll/&#x27;</span>, file)</span><br><span class="line">        &#125;))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line"></span><br><span class="line">    entry: &#123;</span><br><span class="line">        vendors: [<span class="string">&#x27;react&#x27;</span>, <span class="string">&#x27;react-dom&#x27;</span>],</span><br><span class="line">        lodash: [<span class="string">&#x27;lodash&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: <span class="string">&#x27;[name].dll.js&#x27;</span>,</span><br><span class="line">        path: path.resolve(__dirname, <span class="string">&#x27;..dll&#x27;</span>),</span><br><span class="line">        <span class="comment">// 可以在控制台使用的变量,通过全局变量暴露出来</span></span><br><span class="line">        library: <span class="string">&#x27;[name]&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    plugins</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> <code>npm install add-asset-html-webpack-plugin --save</code></p>
<p> 目标：<br> 第一次打包时把常用的库放到一个文件，再次引用不再从node_modules里找</p>
<p> 第三方模块只打包一次<br> 引入第三方模块时，用dll文件引入<br> 先打包<code>npm run build:dll</code> 打包<code>webpack.dll.js</code>，再运行<code>npm run build</code></p>
 <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">&quot;build&quot;: &quot;webpack --progress --colors --devtool cheap-module-source-map&quot;,</span><br><span class="line">&quot;build:dll&quot;: &quot;webpack --config webpack.dll.config.js&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
<li><p>控制包文件大</p>
</li>
<li><p>thread-loader, paraller-webpack, happypack多进程打包</p>
</li>
<li><p>合理使用sourceMap</p>
</li>
<li><p>结合stats分析打包结果</p>
</li>
<li><p>开发环境内存编译</p>
</li>
<li><p>开发环境无用插件剔除(开发环境没必要压缩之类的)</p>
</li>
</ol>
<h2 id="多页面打包配置"><a href="#多页面打包配置" class="headerlink" title="多页面打包配置"></a>多页面打包配置</h2><p>多个entry对应多个html文件</p>
<p>webpack.common.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> makePlugins = <span class="function">(<span class="params">configs</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> plugins = [</span><br><span class="line">        <span class="keyword">new</span> CleanWebpackPlugin([<span class="string">&#x27;dist&#x27;</span>], &#123;</span><br><span class="line">            root: path.resolve(__dirname, <span class="string">&#x27;../&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    ];</span><br><span class="line">    <span class="built_in">Object</span>.keys(configs.entry).forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        plugins.push(</span><br><span class="line">            <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: <span class="string">&#x27;src/index.html&#x27;</span>,</span><br><span class="line">            filename: <span class="string">`<span class="subst">$&#123;item&#125;</span>.html`</span>,</span><br><span class="line">            chunks: [<span class="string">&#x27;runtime&#x27;</span>, <span class="string">&#x27;vendors&#x27;</span>, item]</span><br><span class="line">        &#125;),</span><br><span class="line">        )</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// dllplugins</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> plugins;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> configs = &#123;</span><br><span class="line">    entry: &#123;</span><br><span class="line">        index: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">        list: <span class="string">&#x27;./src/list.js&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    plugins</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">config.plugins = makePlugins(config);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = config;</span><br></pre></td></tr></table></figure>

<h2 id="如何编写一个loader"><a href="#如何编写一个loader" class="headerlink" title="如何编写一个loader"></a>如何编写一个loader</h2><p>常用功能: 国际化替换中英文, 捕获异常(在function外加trycatch)</p>
<p><a target="_blank" rel="noopener" href="https://www.webpackjs.com/api/loaders/">loader API</a></p>
<p>replaceLoader.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> loaderUtils = <span class="built_in">require</span>(<span class="string">&#x27;loader-utils&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">source</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> options = loaderUtils.getOptions();</span><br><span class="line">    <span class="keyword">const</span> result = source.replace(<span class="string">&#x27;hello &#x27;</span>, options.name);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 等于 return result</span></span><br><span class="line">    <span class="built_in">this</span>.callback(<span class="literal">null</span>, result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>webpack.config.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">resolveLoader: &#123;</span><br><span class="line">    <span class="comment">// path.resolve(__dirname, &#x27;./loaders/replaceLoader.js)可以不用写这么多,直接写name</span></span><br><span class="line">    modules: [<span class="string">&#x27;node_modules&#x27;</span>, <span class="string">&#x27;./loaders&#x27;</span>]</span><br><span class="line">&#125;,</span><br><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [&#123;</span><br><span class="line">        test: <span class="regexp">/\.js/</span>,</span><br><span class="line">        use: [&#123;</span><br><span class="line">            loader: <span class="string">&#x27;replaceLoader&#x27;</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">                name: <span class="string">&#x27;lee&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>复杂的replaceLoader.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> loaderUtils = <span class="built_in">require</span>(<span class="string">&#x27;loader-utils&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">source</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> options = loaderUtils.getOptions();</span><br><span class="line">    <span class="keyword">const</span> callback = <span class="built_in">this</span>.async();</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> result = source.replace(<span class="string">&#x27;dell&#x27;</span>, options.name);</span><br><span class="line">        callback(<span class="literal">null</span>, result);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="如何编写一个Plugin"><a href="#如何编写一个Plugin" class="headerlink" title="如何编写一个Plugin"></a>如何编写一个Plugin</h2><p>打包的某个时刻，是插件生效的场景，比如打包之前，清除dist目录<br><a target="_blank" rel="noopener" href="https://www.webpackjs.com/api/compiler-hooks">compiler hooks</a><br>copyright-webpack-plugin.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CopyrightWebpackPlugin</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">options</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;插件被使用了&#x27;</span>, options);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">apply</span>(<span class="params">compiler</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// 同步写法</span></span><br><span class="line">        compiler.hooks.emit.tap(<span class="string">&#x27;CopyrightWebpackPlugin&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//  异步写法</span></span><br><span class="line">        compiler.hooks.emit.tapAsync(<span class="string">&#x27;CopyrightWebpackPlugin&#x27;</span>, <span class="function">(<span class="params">compilation, cb</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// compilation.assets为打包后的文件</span></span><br><span class="line">            compilation.assets[<span class="string">&#x27;copyright.txt&#x27;</span>] = &#123;</span><br><span class="line">                source: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">&#x27;copyright by hello world&#x27;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                size: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">21</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 一定要加回调</span></span><br><span class="line">            cb();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = CopyrightWebpackPlugin;</span><br></pre></td></tr></table></figure>

<p>webpack.config.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> copyrightWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;./plugins/copyright-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line">plugins: [</span><br><span class="line">    <span class="keyword">new</span> copyrightWebpackPlugin(&#123;</span><br><span class="line">        name: <span class="string">&#x27;world&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="用node调试工具调试webpack"><a href="#用node调试工具调试webpack" class="headerlink" title="用node调试工具调试webpack"></a>用node调试工具调试webpack</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;debug&quot;: &quot;node --inspect --inspect-brk node_modules/webpack/bin/webpack.jss&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在插件中写debugger，会自动跳到该断点</p>
<h2 id="CreateReactApp-https-github-com-facebook-create-react-app）项目Webpack解析"><a href="#CreateReactApp-https-github-com-facebook-create-react-app）项目Webpack解析" class="headerlink" title="[CreateReactApp](https://github.com/facebook/create-react-app）项目Webpack解析"></a>[CreateReactApp](<a target="_blank" rel="noopener" href="https://github.com/facebook/create-react-app%EF%BC%89%E9%A1%B9%E7%9B%AEWebpack%E8%A7%A3%E6%9E%90">https://github.com/facebook/create-react-app）项目Webpack解析</a></h2><p><code>npm run eject</code>查看webpack配置</p>
<h2 id="Vue项目配置"><a href="#Vue项目配置" class="headerlink" title="Vue项目配置"></a><a target="_blank" rel="noopener" href="https://cli.vuejs.org/config/#global-cli-config">Vue项目配置</a></h2><p>新建vue.config.js配置</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Webpack/" rel="tag"># Webpack</a>
              <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag"># 学习笔记</a>
              <a href="/tags/webpack4/" rel="tag"># webpack4</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/posts/Git-%E7%BB%8F%E9%AA%8C%E7%A7%AF%E7%B4%AF/" rel="prev" title="Git 经验积累">
                  <i class="fa fa-chevron-left"></i> Git 经验积累
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/posts/Redis%E5%AE%9E%E6%88%98%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="next" title="Redis实战读书笔记">
                  Redis实战读书笔记 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>







<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">believeZJP</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">758k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">11:29</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  







  






</body>
</html>
