<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>vue.js表格组件demo</title>
	</head>
	<body>
		<!---   表格组件模版              -->
		<script type="text/x-template" id="grid-template">
			<table>
				<thead>
					<tr>
						<th v-for="key in columns" @click="sortBy(key)" :class='{active:sortKey == key}'>
							{{key | capitalize}}
							<span class='arrow' :class="sortOrders[key] > 0 ? 'asc' : 'des'"></span>
						</th>
					</tr>
				</thead>
				<tbody>
					<tr v-for="entry in data | filterBy filterKey | orderBy  sortKey sortOrders[sortKey]">
						<td v-for="key in columns">
							{{entry[key]}}
						</td>
					</tr>
				</tbody>
			</table>
		</script>
		
		<!---真正的html代码开始--->
		<div id="demo">
			<form id="search">
				Search <input type="text" name="query" v-model="searchQuery" />
			</form>
			<demo-grid :data="gridData" :columns="gridColumns" :filter-key="searchQuery">
			</demo-grid>			
		</div>
		<script src="../../../../js/libs/vue.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			Vue.component('demo-grid',{
				template:'#grid-template',
				props:{
					data:Array,
					columns:Array,
					filterKey:String
				},
				data: function(){
					var sortOrders = {};
					this.columns.forEach(function(key){
						sortOrders[key] = 1
					})
					return {
						sortKey : '',
						sortOrders: sortOrders
					}
				},
				methods:{
					sortBy: function(key){
						this.sortKey = key
						this.sortOrders[key] = this.sortOrders[key] * -1
					}
				}
			})
			
			//bootstrap the demo
			var demo = new Vue({
				el: '#demo',
				data: {
					searchQuery: '',
					gridColumns: ['name','power'],
					gridData: [
						{name:'Chuck Norris',power:Infinity },
						{name:'Burce Lee',power:9000 },
						{name:'Jackie Chan',power: 7000},
						{name:'Jet Li',power: 8000 },
						{name:'Wu Jing',power: 6000}
					]
				}
			})
		</script>
	</body>
</html>
