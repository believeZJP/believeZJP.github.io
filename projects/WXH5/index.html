<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>AbleCloud端午节贺卡</title>
		<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no"/>
		<link rel="stylesheet" type="text/css" href="css/iSlider.min.css"/>
		<link rel="stylesheet" type="text/css" href="css/css.css"/>
	</head>
	<body>
		<div id="iSlider-wrapper"></div>
		<div id="msg" style="position: absolute; top: 0;left: 0; z-index: 10000;"></div>
		
		<div class="mask">
			<div class="guidArea">
				<img src="img/dragonShip.png" />
				<img src="img/hand01.png"/>
			</div>
		</div>
		<div class="guideGesture">
			<img src="img/handGif.gif" alt="" class="guesgif" />
		</div>
		<img src="img/bg02.png" class="none"/>
		<img src="img/bg03.png" class="none"/>
	<script src="js/iSlider.min.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		var list = [{
			content: 'img/bg03.png'
		}, {
			content: 'img/bg02.png'
		}];
		var S;
		initSlider();
		function initSlider() {
			S = new iSlider({
				dom: document.getElementById('iSlider-wrapper'),
				data: list,
				isLooping: 1,
				animateTime: 800, // ms
				isOverspread: 1,
				oninitialized: initCall
			});
			S.hold();//刚开始不可以拖动;
		}
		function initCall(){
			window.setTimeout(function() {
				//以下显示遮罩层
				var winHeight2 = document.documentElement.clientHeight;
				var winHeight = window.screen.height;
				
				
//				var winHeight = document.getElementsByClassName("islider-pic")[0].scrollHeight;
				document.getElementById("msg").textContent 
				var str ="<br/>li的高度"+ winHeight+"screenHeight"+winHeight+"__clientHeight:"+winHeight2+""+"innerHeight"+window.innerHeight;
				var flag = false;
				var gap = 0;
				if(winHeight>=1280){
					winHeight = winHeight2 + 64;
				}
				if(winHeight>winHeight2){
					flag = true;
					gap = winHeight - winHeight2;
					winHeight = winHeight2;
				}
				document.getElementById("msg").textContent  = "差距"+gap+str;
				console.log(winHeight);
//				console.log(winHeight +":"+winHeight2);
				var mask = document.getElementsByClassName("mask")[0];
				mask.style.height = winHeight + "px";
				mask.style.display = "block";
				//判断屏幕和实际图片的缩放比
				var rate = parseInt((winHeight/1334)*800);
				
				if(flag){
					rate += gap;
				}
				rate = parseInt(rate)+"px";
				mask.getElementsByClassName("guidArea")[0].style.top = rate;
				
				
				window.setTimeout(function() {
					S.unhold();//可以拖动
					//删除遮罩层
					mask.style.display = 'none';
					//添加手势指引
					var guide = document.getElementsByClassName("guideGesture")[0];
					var rate2 = (winHeight/1334)*982;
					if(flag){
						rate2 += gap;
					}
					
					guide.style.top = parseInt(rate2)+"px";
					guide.style.display = "block";
				}, 2000);
			}, 500);
		}
		S.on('slide', slideCallBack);
		function slideCallBack(num, dom) {
			var gesture = document.getElementsByClassName("guideGesture")[0];
			gesture.style.display = "none";
			S.off("slide",slideCallBack);
		}
	</script>
			
	</body>
</html>
